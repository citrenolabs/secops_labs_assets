{"CategoryName":"SecOpsLabs","OverviewTemplatesDetails":[{"OverviewTemplate":{"Identifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Name":"SOAR view","Creator":null,"PlaybookDefinitionIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Type":0,"AlertRuleType":null,"Roles":[],"Widgets":[{"Title":"HTML","Description":"","Identifier":"adbd9d01-2092-4886-ae44-aa9a1d10109f","Order":1,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":3,"DataDefinitionJson":"{\n  \"htmlContent\": \"<!doctype html>\\n<html lang=\\\"en\\\">\\n<head>\\n  <meta charset=\\\"utf-8\\\" />\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\" />\\n  <meta name=\\\"color-scheme\\\" content=\\\"light dark\\\">\\n  <title>Login Hours Widget</title>\\n\\n  <style>\\n    :root{\\n      --bg:#0b1220;\\n      --panel:#101a2e;\\n      --panel-2:#0e172a;\\n      --border:#1f2b45;\\n      --muted:#94a3b8;\\n      --text:#e5e7eb;\\n      --accent:#3b82f6;\\n      --accent-2:#22c55e;\\n      --danger:#ef4444;\\n      --shadow: 0 10px 30px rgba(0,0,0,.35);\\n      --radius: 14px;\\n      --business-hours: rgba(34,197,94,.15);\\n      --login-valid: rgba(34,197,94,.6);\\n      --login-invalid: rgba(239,68,68,.6);\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      --bg: #f1f3f4;\\n      --panel: #ffffff;\\n      --panel-2: #f8f9fa;\\n      --border: #dadce0;\\n      --muted: #5f6368;\\n      --text: #202124;\\n      --accent: #1a73e8;\\n      --accent-2: #1e8e3e;\\n      --danger: #ea4335;\\n      --shadow: 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);\\n      --business-hours: rgba(30,142,62,.1);\\n      --login-valid: rgba(30,142,62,.4);\\n      --login-invalid: rgba(234,67,53,.4);\\n    }\\n\\n    html,body{\\n      height:100%;\\n      margin:0;\\n      padding:0;\\n    }\\n    body{\\n      background: radial-gradient(900px 500px at 40% -10%, rgba(59,130,246,.18), transparent 60%),\\n                  var(--bg);\\n      color: var(--text);\\n      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, \\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\";\\n      transition: background 0.3s ease, color 0.3s ease;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      padding: clamp(5px, 1.5vw, 15px);\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      background: var(--bg);\\n    }\\n\\n    .widget-container{\\n      max-width: 800px;\\n      width: 100%;\\n      min-width: 300px;\\n      background: var(--panel);\\n      border: 1px solid var(--border);\\n      border-radius: var(--radius);\\n      box-shadow: var(--shadow);\\n      padding: clamp(6px, 1vw, 12px);\\n      height: auto;\\n      overflow: visible;\\n    }\\n\\n    .widget-header{\\n      margin-bottom: clamp(4px, 1vw, 8px);\\n      padding-bottom: clamp(3px, 0.8vw, 6px);\\n      border-bottom: 1px solid var(--border);\\n      display: block;\\n    }\\n\\n    .widget-header h2{\\n      margin: 0 0 clamp(2px, 0.5vw, 4px) 0;\\n      font-size: clamp(0.85rem, 2vw, 1.1rem);\\n      font-weight: 700;\\n      color: var(--text);\\n    }\\n\\n    .widget-header .subtitle{\\n      color: var(--muted);\\n      font-size: clamp(0.65rem, 1.5vw, 0.85rem);\\n    }\\n\\n    .login-info{\\n      display: flex;\\n      align-items: center;\\n      gap: clamp(3px, 0.8vw, 6px);\\n      padding: clamp(2px, 0.5vw, 4px) clamp(4px, 1vw, 8px);\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 4px;\\n      margin-bottom: clamp(3px, 0.8vw, 6px);\\n    }\\n\\n    .login-info .icon{\\n      width: clamp(16px, 3vw, 24px);\\n      height: clamp(16px, 3vw, 24px);\\n      border-radius: 4px;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-size: clamp(0.6rem, 1.5vw, 0.85rem);\\n      flex-shrink: 0;\\n    }\\n\\n    .login-info.valid .icon{\\n      background: linear-gradient(135deg, rgba(34,197,94,.2), rgba(16,185,129,.15));\\n      color: var(--accent-2);\\n      border: 1px solid rgba(34,197,94,.3);\\n    }\\n\\n    .login-info.invalid .icon{\\n      background: linear-gradient(135deg, rgba(239,68,68,.2), rgba(220,38,38,.15));\\n      color: var(--danger);\\n      border: 1px solid rgba(239,68,68,.3);\\n    }\\n\\n    .login-info .details{\\n      flex: 1;\\n    }\\n\\n    .login-info .label{\\n      font-size: 0.65rem;\\n      color: var(--muted);\\n      margin-bottom: 2px;\\n      display: none; /* Hide label to save space */\\n    }\\n\\n    .login-info .timestamp{\\n      font-size: clamp(0.6rem, 1.5vw, 0.8rem);\\n      font-weight: 600;\\n      color: var(--text);\\n      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;\\n    }\\n\\n    .login-info .status{\\n      padding: clamp(2px, 0.5vw, 4px) clamp(4px, 1vw, 8px);\\n      border-radius: 999px;\\n      font-size: clamp(0.55rem, 1.3vw, 0.75rem);\\n      font-weight: 600;\\n    }\\n\\n    .login-info.valid .status{\\n      background: rgba(34,197,94,.15);\\n      color: var(--accent-2);\\n      border: 1px solid rgba(34,197,94,.3);\\n    }\\n\\n    .login-info.invalid .status{\\n      background: rgba(239,68,68,.15);\\n      color: var(--danger);\\n      border: 1px solid rgba(239,68,68,.3);\\n    }\\n\\n    .calendar-container{\\n      overflow: visible;\\n      width: 100%;\\n    }\\n\\n    .calendar-grid{\\n      display: grid;\\n      grid-template-columns: clamp(30px, 8vw, 50px) repeat(24, minmax(0, 1fr));\\n      grid-template-rows: auto repeat(7, 1fr);\\n      gap: clamp(1px, 0.2vw, 2px);\\n      width: 100%;\\n      min-width: 0;\\n      align-items: stretch;\\n      justify-items: stretch;\\n    }\\n    \\n    .calendar-grid > * {\\n      min-width: 0;\\n      box-sizing: border-box;\\n      align-self: stretch;\\n    }\\n\\n    .hour-label{\\n      padding: clamp(1px, 0.3vw, 3px);\\n      text-align: center;\\n      font-size: clamp(0.4rem, 1.2vw, 0.6rem);\\n      color: var(--muted);\\n      font-weight: 600;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      line-height: 1.2;\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 2px;\\n      writing-mode: horizontal-tb;\\n      box-sizing: border-box;\\n      margin: 0;\\n      min-height: clamp(18px, 3.5vh, 22px);\\n    }\\n\\n    .day-header{\\n      padding: clamp(2px, 0.5vw, 4px) clamp(1px, 0.3vw, 3px);\\n      text-align: center;\\n      font-weight: 600;\\n      font-size: clamp(0.5rem, 1.4vw, 0.7rem);\\n      color: var(--text);\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 2px;\\n      writing-mode: horizontal-tb;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      flex-direction: column;\\n      box-sizing: border-box;\\n      margin: 0;\\n      min-height: clamp(18px, 3.5vh, 22px);\\n    }\\n\\n    .day-header .day-name{\\n      display: block;\\n    }\\n\\n    .day-header .day-date{\\n      font-size: clamp(0.4rem, 1vw, 0.55rem);\\n      color: var(--muted);\\n      font-weight: 500;\\n      display: block;\\n      margin-top: clamp(1px, 0.3vw, 2px);\\n    }\\n\\n    .time-cell{\\n      border: 1px solid var(--border);\\n      border-radius: 1px;\\n      position: relative;\\n      transition: all 0.2s ease;\\n      width: 100%;\\n      min-height: clamp(18px, 3.5vh, 22px);\\n      box-sizing: border-box;\\n      margin: 0;\\n      padding: 0;\\n      display: block;\\n    }\\n\\n    .time-cell.daytime{\\n      background: rgba(255,255,255,.02);\\n    }\\n\\n    .time-cell.nighttime{\\n      background: rgba(0,0,0,.05);\\n    }\\n\\n    .time-cell.business-hours{\\n      background: var(--business-hours) !important;\\n      border-color: rgba(34,197,94,.3);\\n    }\\n\\n    body.light-theme .time-cell.daytime{\\n      background: rgba(0,0,0,.01);\\n    }\\n\\n    body.light-theme .time-cell.nighttime{\\n      background: rgba(0,0,0,.03);\\n    }\\n\\n    .time-cell.login-event{\\n      border-width: 2px;\\n      box-shadow: 0 0 0 2px var(--bg);\\n    }\\n\\n    .time-cell.login-event.valid{\\n      background: var(--login-valid);\\n      border-color: var(--accent-2);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 12px rgba(34,197,94,.4);\\n    }\\n\\n    .time-cell.login-event.invalid{\\n      background: var(--danger);\\n      border-color: var(--danger);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 12px rgba(239,68,68,.4);\\n    }\\n\\n    .time-cell.login-event::after{\\n      content: '‚óè';\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, -50%);\\n      font-size: 0.5rem;\\n      line-height: 1;\\n    }\\n\\n    .legend{\\n      display: none; /* Hide legend to save space */\\n      gap: 12px;\\n      margin-top: 8px;\\n      padding-top: 8px;\\n      border-top: 1px solid var(--border);\\n      flex-wrap: wrap;\\n    }\\n\\n    .legend-item{\\n      display: flex;\\n      align-items: center;\\n      gap: 4px;\\n      font-size: 0.65rem;\\n      color: var(--text);\\n    }\\n\\n    .legend-color{\\n      width: 12px;\\n      height: 12px;\\n      border-radius: 2px;\\n      border: 1px solid var(--border);\\n    }\\n\\n    .legend-color.business-hours{\\n      background: var(--business-hours);\\n      border-color: rgba(34,197,94,.2);\\n    }\\n\\n    .legend-color.valid{\\n      background: var(--login-valid);\\n      border-color: var(--accent-2);\\n    }\\n\\n    .legend-color.invalid{\\n      background: var(--login-invalid);\\n      border-color: var(--danger);\\n    }\\n\\n    @media (max-width: 768px){\\n      .widget-container{\\n        max-width: 100%;\\n        padding: clamp(4px, 1.5vw, 8px);\\n      }\\n      .calendar-grid{\\n        grid-template-columns: clamp(25px, 6vw, 40px) repeat(24, minmax(0, 1fr));\\n        min-width: 0;\\n      }\\n    }\\n\\n    @media (max-width: 480px){\\n      .widget-container{\\n        max-height: min(320px, 50vh);\\n      }\\n      .calendar-container{\\n        max-height: min(280px, 45vh);\\n      }\\n      .calendar-grid{\\n        grid-template-rows: clamp(14px, 2.5vh, 18px) repeat(7, minmax(clamp(18px, 2.5vh, 22px), 1fr));\\n      }\\n    }\\n  </style>\\n</head>\\n\\n<body>\\n  <div class=\\\"widget-container\\\">\\n    <div class=\\\"widget-header\\\">\\n      <h2>Outside of Business Hours</h2>\\n      <div class=\\\"subtitle\\\">Weekly view showing business hours and login events</div>\\n    </div>\\n\\n    <div id=\\\"loginInfo\\\" class=\\\"login-info\\\">\\n      <div class=\\\"icon\\\">üîê</div>\\n      <div class=\\\"details\\\">\\n        <div class=\\\"label\\\">Login Timestamp</div>\\n        <div class=\\\"timestamp\\\" id=\\\"loginTimestamp\\\">Loading...</div>\\n      </div>\\n      <div class=\\\"status\\\" id=\\\"loginStatus\\\">Checking...</div>\\n    </div>\\n\\n    <div class=\\\"calendar-container\\\">\\n      <div class=\\\"calendar-grid\\\" id=\\\"calendarGrid\\\">\\n        <!-- Grid will be generated by JavaScript -->\\n      </div>\\n    </div>\\n\\n    <div class=\\\"legend\\\">\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color business-hours\\\"></div>\\n        <span>Business Hours (9 AM - 5 PM)</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color valid\\\"></div>\\n        <span>Valid Login (Within Business Hours)</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color invalid\\\"></div>\\n        <span>Invalid Login (Outside Business Hours)</span>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <script>\\n    // Business hours configuration (9 AM - 5 PM)\\n    const BUSINESS_HOURS_START = 9;\\n    const BUSINESS_HOURS_END = 17; // 5 PM\\n\\n    // Get timestamp from URL parameter or use default (outside business hours)\\n    function getTimestampFromURL() {\\n      const urlParams = new URLSearchParams(window.location.search);\\n      const timestamp = urlParams.get('timestamp');\\n      if (timestamp) {\\n        return new Date(timestamp);\\n      }\\n      // Default: Saturday at 11 PM (outside business hours)\\n      const defaultDate = new Date();\\n      const currentDay = defaultDate.getDay();\\n      const daysUntilSaturday = currentDay === 6 ? 0 : (6 - currentDay + 7) % 7; // Today if Saturday, else next Saturday\\n      defaultDate.setDate(defaultDate.getDate() + daysUntilSaturday);\\n      defaultDate.setHours(23, 0, 0, 0); // 11 PM\\n      return defaultDate;\\n    }\\n\\n    const loginTimestamp = getTimestampFromURL();\\n    const loginDay = loginTimestamp.getDay(); // 0 = Sunday, 6 = Saturday\\n    const loginHour = loginTimestamp.getHours();\\n    const loginMinute = loginTimestamp.getMinutes();\\n\\n    // Check if login is within business hours\\n    const isWithinBusinessHours = loginDay >= 1 && loginDay <= 5 && // Monday to Friday\\n                                   loginHour >= BUSINESS_HOURS_START && \\n                                   loginHour < BUSINESS_HOURS_END;\\n\\n    // Format timestamp for display - compact format\\n    function formatTimestamp(date) {\\n      const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\\n      const dayName = days[date.getDay()];\\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\\n      const day = date.getDate().toString().padStart(2, '0');\\n      const hours = date.getHours().toString().padStart(2, '0');\\n      const minutes = date.getMinutes().toString().padStart(2, '0');\\n      return `${dayName} ${month}/${day} ${hours}:${minutes}`;\\n    }\\n\\n    // Update login info display\\n    const loginInfo = document.getElementById('loginInfo');\\n    const loginTimestampEl = document.getElementById('loginTimestamp');\\n    const loginStatusEl = document.getElementById('loginStatus');\\n\\n    loginTimestampEl.textContent = formatTimestamp(loginTimestamp);\\n    \\n    if (isWithinBusinessHours) {\\n      loginInfo.classList.add('valid');\\n      loginInfo.classList.remove('invalid');\\n      loginStatusEl.textContent = 'Valid';\\n    } else {\\n      loginInfo.classList.add('invalid');\\n      loginInfo.classList.remove('valid');\\n      loginStatusEl.textContent = 'Outside of business hours';\\n    }\\n\\n    // Generate calendar grid - 7 days x 24 hours\\n    function generateCalendar() {\\n      const grid = document.getElementById('calendarGrid');\\n      const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\\n      \\n      // Get the start of the week (Sunday) based on the login date\\n      const weekStart = new Date(loginTimestamp);\\n      weekStart.setDate(loginTimestamp.getDate() - loginTimestamp.getDay());\\n      weekStart.setHours(0, 0, 0, 0); // Normalize to midnight\\n      \\n      // Header row: empty cell + 24 hour labels\\n      const emptyHeader = document.createElement('div');\\n      emptyHeader.className = 'day-header';\\n      grid.appendChild(emptyHeader);\\n      \\n      for (let hour = 0; hour < 24; hour++) {\\n        const hourLabel = document.createElement('div');\\n        hourLabel.className = 'hour-label';\\n        const displayHour = hour === 0 ? '12A' : hour < 12 ? `${hour}A` : hour === 12 ? '12P' : `${hour - 12}P`;\\n        \\n        // Add emoji for day/night indication\\n        let emoji = '';\\n        if (hour === 6) {\\n          emoji = 'üåÖ '; // Sunrise\\n        } else if (hour === 18) {\\n          emoji = 'üåÜ '; // Sunset\\n        } else if (hour >= 6 && hour < 18) {\\n          emoji = '‚òÄÔ∏è '; // Daytime\\n        } else {\\n          emoji = 'üåô '; // Nighttime\\n        }\\n        \\n        hourLabel.textContent = emoji + displayHour;\\n        grid.appendChild(hourLabel);\\n      }\\n\\n      // Generate 7 day rows, each with day header + 24 hour cells\\n      for (let dayOffset = 0; dayOffset < 7; dayOffset++) {\\n        const currentDay = new Date(weekStart);\\n        currentDay.setDate(weekStart.getDate() + dayOffset);\\n        currentDay.setHours(0, 0, 0, 0); // Normalize to midnight for date comparison\\n        const dayOfWeek = currentDay.getDay();\\n        \\n        // Day header\\n        const dayHeader = document.createElement('div');\\n        dayHeader.className = 'day-header';\\n        dayHeader.innerHTML = `\\n          <span class=\\\"day-name\\\">${days[dayOfWeek]}</span>\\n          <span class=\\\"day-date\\\">${currentDay.getMonth() + 1}/${currentDay.getDate()}</span>\\n        `;\\n        grid.appendChild(dayHeader);\\n\\n        // 24 hour cells for this day\\n        for (let hour = 0; hour < 24; hour++) {\\n          const cell = document.createElement('div');\\n          cell.className = 'time-cell';\\n          \\n          // Add daytime/nighttime class (daytime: 6 AM - 6 PM)\\n          if (hour >= 6 && hour < 18) {\\n            cell.classList.add('daytime');\\n          } else {\\n            cell.classList.add('nighttime');\\n          }\\n          \\n          // Check if this is business hours (Monday-Friday, 9 AM - 5 PM)\\n          const isBusinessHour = dayOfWeek >= 1 && dayOfWeek <= 5 && \\n                                 hour >= BUSINESS_HOURS_START && hour < BUSINESS_HOURS_END;\\n          \\n          if (isBusinessHour) {\\n            cell.classList.add('business-hours');\\n          }\\n\\n          // Check if this is the login event - compare date components directly\\n          const isLoginEvent = currentDay.getFullYear() === loginTimestamp.getFullYear() &&\\n                              currentDay.getMonth() === loginTimestamp.getMonth() &&\\n                              currentDay.getDate() === loginTimestamp.getDate() &&\\n                              hour === loginHour;\\n          \\n          if (isLoginEvent) {\\n            cell.classList.add('login-event');\\n            if (isWithinBusinessHours) {\\n              cell.classList.add('valid');\\n            } else {\\n              cell.classList.add('invalid');\\n            }\\n          }\\n\\n          grid.appendChild(cell);\\n        }\\n      }\\n    }\\n\\n    generateCalendar();\\n  </script>\\n</body>\\n</html>\\n\\n\",\n  \"htmlHeight\": 400,\n  \"safeRendering\": false,\n  \"type\": 3,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":1,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"HTML","Description":"","Identifier":"b1011ebe-bf77-4f87-a48e-74691e602bdd","Order":2,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":3,"DataDefinitionJson":"{\n  \"htmlContent\": \"<!doctype html>\\n<html lang=\\\"en\\\">\\n<head>\\n  <meta charset=\\\"utf-8\\\" />\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\" />\\n  <meta name=\\\"color-scheme\\\" content=\\\"light dark\\\">\\n  <title>Globe Travel Widget</title>\\n  <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\\n  <script src=\\\"https://cdn.jsdelivr.net/npm/topojson@3\\\"></script>\\n\\n  <style>\\n    :root{\\n      --bg:#0b1220;\\n      --panel:#101a2e;\\n      --panel-2:#0e172a;\\n      --border:#1f2b45;\\n      --muted:#94a3b8;\\n      --text:#e5e7eb;\\n      --accent:#3b82f6;\\n      --accent-2:#22c55e;\\n      --danger:#ef4444;\\n      --shadow: 0 10px 30px rgba(0,0,0,.35);\\n      --radius: 14px;\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      --bg: #f1f3f4;\\n      --panel: #ffffff;\\n      --panel-2: #f8f9fa;\\n      --border: #dadce0;\\n      --muted: #5f6368;\\n      --text: #202124;\\n      --accent: #1a73e8;\\n      --accent-2: #1e8e3e;\\n      --danger: #ea4335;\\n      --shadow: 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);\\n    }\\n\\n    html,body{\\n      height:100%;\\n      margin:0;\\n      padding:0;\\n    }\\n    body{\\n      background: radial-gradient(900px 500px at 40% -10%, rgba(59,130,246,.18), transparent 60%),\\n                  var(--bg);\\n      color: var(--text);\\n      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, \\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\";\\n      transition: background 0.3s ease, color 0.3s ease;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      padding: 10px;\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      background: var(--bg);\\n    }\\n\\n    .widget-container{\\n      max-width: 800px;\\n      width: 100%;\\n      background: var(--panel);\\n      border: 1px solid var(--border);\\n      border-radius: var(--radius);\\n      box-shadow: var(--shadow);\\n      padding: 8px;\\n      max-height: 280px;\\n      overflow: visible;\\n    }\\n\\n    .widget-header{\\n      margin-bottom: 6px;\\n      padding-bottom: 4px;\\n      border-bottom: 1px solid var(--border);\\n    }\\n\\n    .widget-header h2{\\n      margin: 0 0 4px 0;\\n      font-size: 1rem;\\n      font-weight: 700;\\n      color: var(--text);\\n    }\\n\\n    .widget-header .subtitle{\\n      color: var(--muted);\\n      font-size: 0.75rem;\\n    }\\n\\n    .cities-info{\\n      display: flex;\\n      align-items: center;\\n      justify-content: space-between;\\n      gap: 12px;\\n      padding: 4px 8px;\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 6px;\\n      margin-bottom: 6px;\\n      font-size: 0.7rem;\\n    }\\n\\n    .city{\\n      display: flex;\\n      align-items: center;\\n      gap: 6px;\\n    }\\n\\n    .city-dot{\\n      width: 8px;\\n      height: 8px;\\n      border-radius: 50%;\\n      flex-shrink: 0;\\n    }\\n\\n    .city-dot.origin{\\n      background: var(--accent);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 8px rgba(59,130,246,.5);\\n    }\\n\\n    .city-dot.destination{\\n      background: var(--accent-2);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 8px rgba(34,197,94,.5);\\n    }\\n\\n    .city-name{\\n      font-weight: 600;\\n      color: var(--text);\\n    }\\n\\n    .distance-info{\\n      color: var(--muted);\\n      font-size: 0.65rem;\\n    }\\n\\n    .globe-container{\\n      width: 100%;\\n      height: 200px;\\n      position: relative;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      overflow: visible;\\n    }\\n\\n    .globe-svg{\\n      width: 100%;\\n      height: 100%;\\n      max-width: 100%;\\n      max-height: 200px;\\n    }\\n\\n    .globe-circle{\\n      fill: rgba(59,130,246,.15);\\n      stroke: rgba(59,130,246,.4);\\n      stroke-width: 2;\\n    }\\n\\n    .globe-circle-shadow{\\n      fill: rgba(59,130,246,.05);\\n      stroke: none;\\n    }\\n\\n    .globe-grid{\\n      fill: none;\\n      stroke: rgba(148,163,184,.25);\\n      stroke-width: 0.5;\\n    }\\n\\n    .globe-continent{\\n      fill: rgba(34,197,94,.1);\\n      stroke: rgba(34,197,94,.2);\\n      stroke-width: 0.5;\\n    }\\n\\n    .travel-line{\\n      fill: none;\\n      stroke: var(--accent);\\n      stroke-width: 2;\\n      opacity: 0.8;\\n      filter: drop-shadow(0 0 4px rgba(59,130,246,.6));\\n    }\\n\\n    .city-marker{\\n      fill: var(--accent);\\n      filter: drop-shadow(0 0 4px rgba(59,130,246,.8));\\n    }\\n\\n    .city-marker.destination{\\n      fill: var(--accent-2);\\n      filter: drop-shadow(0 0 4px rgba(34,197,94,.8));\\n    }\\n\\n    .city-label{\\n      font-size: 0.6rem;\\n      fill: var(--text);\\n      font-weight: 600;\\n      text-anchor: middle;\\n      dominant-baseline: middle;\\n    }\\n\\n    body.light-theme .globe-circle{\\n      fill: rgba(26,115,232,.08);\\n      stroke: rgba(26,115,232,.2);\\n    }\\n\\n    body.light-theme .globe-grid{\\n      stroke: rgba(95,99,104,.15);\\n    }\\n  </style>\\n</head>\\n\\n<body>\\n  <div class=\\\"widget-container\\\">\\n    <div class=\\\"widget-header\\\">\\n      <h2>Travel Distance</h2>\\n      <div class=\\\"subtitle\\\">Great circle route between cities</div>\\n    </div>\\n\\n    <div class=\\\"cities-info\\\" id=\\\"citiesInfo\\\">\\n      <div class=\\\"city\\\">\\n        <div class=\\\"city-dot origin\\\"></div>\\n        <span class=\\\"city-name\\\" id=\\\"originCity\\\">Kansas City</span>\\n      </div>\\n      <div class=\\\"distance-info\\\" id=\\\"distanceInfo\\\">Calculating...</div>\\n      <div class=\\\"city\\\">\\n        <div class=\\\"city-dot destination\\\"></div>\\n        <span class=\\\"city-name\\\" id=\\\"destinationCity\\\">Philadelphia</span>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"globe-container\\\">\\n      <svg class=\\\"globe-svg\\\" id=\\\"globeSvg\\\" viewBox=\\\"0 0 400 200\\\" preserveAspectRatio=\\\"xMidYMid meet\\\">\\n        <!-- Globe will be drawn dynamically -->\\n      </svg>\\n    </div>\\n  </div>\\n\\n  <script>\\n    // City coordinates (latitude, longitude)\\n    const cityCoordinates = {\\n      'Kansas City': { lat: 39.0997, lon: -94.5786 },\\n      'Philadelphia': { lat: 39.9526, lon: -75.1652 },\\n      'New York': { lat: 40.7128, lon: -74.0060 },\\n      'Los Angeles': { lat: 34.0522, lon: -118.2437 },\\n      'Chicago': { lat: 41.8781, lon: -87.6298 },\\n      'Houston': { lat: 29.7604, lon: -95.3698 },\\n      'Phoenix': { lat: 33.4484, lon: -112.0740 },\\n      'San Antonio': { lat: 29.4241, lon: -98.4936 },\\n      'San Diego': { lat: 32.7157, lon: -117.1611 },\\n      'Dallas': { lat: 32.7767, lon: -96.7970 }\\n    };\\n\\n    // Get cities from URL parameters or use defaults\\n    function getCitiesFromURL() {\\n      const urlParams = new URLSearchParams(window.location.search);\\n      const origin = urlParams.get('origin') || 'Kansas City';\\n      const destination = urlParams.get('destination') || 'Philadelphia';\\n      return { origin, destination };\\n    }\\n\\n    const { origin, destination } = getCitiesFromURL();\\n\\n    // Update city names in UI\\n    document.getElementById('originCity').textContent = origin;\\n    document.getElementById('destinationCity').textContent = destination;\\n\\n\\n    // Calculate great circle distance (Haversine formula)\\n    function calculateDistance(lat1, lon1, lat2, lon2) {\\n      const R = 6371; // Earth radius in km\\n      const dLat = (lat2 - lat1) * Math.PI / 180;\\n      const dLon = (lon2 - lon1) * Math.PI / 180;\\n      const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\\n                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\\n                Math.sin(dLon/2) * Math.sin(dLon/2);\\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\\n      return R * c;\\n    }\\n\\n    // Generate great circle path points\\n    function generateGreatCirclePath(lat1, lon1, lat2, lon2, numPoints = 50) {\\n      const points = [];\\n      for (let i = 0; i <= numPoints; i++) {\\n        const t = i / numPoints;\\n        const lat = lat1 + (lat2 - lat1) * t;\\n        const lon = lon1 + (lon2 - lon1) * t;\\n        points.push({ lat, lon });\\n      }\\n      return points;\\n    }\\n\\n    // Draw the world map with travel path using D3.js\\n    function drawGlobe() {\\n      const originCoords = cityCoordinates[origin];\\n      const destCoords = cityCoordinates[destination];\\n\\n      if (!originCoords || !destCoords) {\\n        console.error('City coordinates not found');\\n        return;\\n      }\\n\\n      // Calculate distance\\n      const distance = calculateDistance(\\n        originCoords.lat, originCoords.lon,\\n        destCoords.lat, destCoords.lon\\n      );\\n      const distanceMiles = (distance * 0.621371).toFixed(0);\\n      document.getElementById('distanceInfo').textContent = `${distanceMiles} mi (${distance.toFixed(0)} km)`;\\n\\n      const svg = d3.select('#globeSvg');\\n      svg.selectAll('*').remove();\\n\\n      const width = 400;\\n      const height = 200;\\n\\n      // Calculate center and scale to fit both cities\\n      const centerLon = (originCoords.lon + destCoords.lon) / 2;\\n      const centerLat = (originCoords.lat + destCoords.lat) / 2;\\n      const lonRange = Math.abs(destCoords.lon - originCoords.lon);\\n      const latRange = Math.abs(destCoords.lat - originCoords.lat);\\n      const maxRange = Math.max(lonRange, latRange);\\n      \\n      // Scale to fit the cities with padding - increased zoom\\n      const scale = maxRange > 20 ? 400 : maxRange > 10 ? 600 : maxRange > 5 ? 1000 : 1500;\\n\\n      // Create projection - use geoMercator for world map\\n      const projection = d3.geoMercator()\\n        .scale(scale)\\n        .translate([width / 2, height / 2])\\n        .center([centerLon, centerLat]);\\n\\n      const path = d3.geoPath().projection(projection);\\n\\n      // Load world map data\\n      d3.json('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json')\\n        .then(world => {\\n          // Draw countries\\n          svg.append('g')\\n            .selectAll('path')\\n            .data(topojson.feature(world, world.objects.countries).features)\\n            .enter()\\n            .append('path')\\n            .attr('d', path)\\n            .attr('class', 'globe-continent')\\n            .attr('fill', 'rgba(34,197,94,.08)')\\n            .attr('stroke', 'rgba(148,163,184,.2)')\\n            .attr('stroke-width', 0.5);\\n\\n          // Draw travel path (great circle)\\n          const pathPoints = generateGreatCirclePath(\\n            originCoords.lat, originCoords.lon,\\n            destCoords.lat, destCoords.lon,\\n            100\\n          );\\n\\n          const lineData = pathPoints.map(p => [p.lon, p.lat]);\\n          const lineGenerator = d3.line()\\n            .x(d => projection(d)[0])\\n            .y(d => projection(d)[1])\\n            .curve(d3.curveLinear);\\n\\n          svg.append('path')\\n            .datum(lineData)\\n            .attr('class', 'travel-line')\\n            .attr('d', lineGenerator)\\n            .attr('fill', 'none')\\n            .attr('stroke', 'var(--accent)')\\n            .attr('stroke-width', 2)\\n            .attr('opacity', 0.8);\\n\\n          // Draw city markers\\n          const originProj = projection([originCoords.lon, originCoords.lat]);\\n          const destProj = projection([destCoords.lon, destCoords.lat]);\\n\\n          // Origin marker\\n          svg.append('circle')\\n            .attr('class', 'city-marker')\\n            .attr('cx', originProj[0])\\n            .attr('cy', originProj[1])\\n            .attr('r', 6)\\n            .attr('fill', 'var(--accent)');\\n\\n          svg.append('text')\\n            .attr('class', 'city-label')\\n            .attr('x', originProj[0])\\n            .attr('y', originProj[1] - 12)\\n            .attr('text-anchor', 'middle')\\n            .text(origin);\\n\\n          // Destination marker\\n          svg.append('circle')\\n            .attr('class', 'city-marker destination')\\n            .attr('cx', destProj[0])\\n            .attr('cy', destProj[1])\\n            .attr('r', 6)\\n            .attr('fill', 'var(--accent-2)');\\n\\n          svg.append('text')\\n            .attr('class', 'city-label')\\n            .attr('x', destProj[0])\\n            .attr('y', destProj[1] - 12)\\n            .attr('text-anchor', 'middle')\\n            .text(destination);\\n        })\\n        .catch(error => {\\n          console.error('Error loading world map:', error);\\n          // Fallback: draw simple map outline\\n          svg.append('ellipse')\\n            .attr('class', 'globe-circle')\\n            .attr('cx', width / 2)\\n            .attr('cy', height / 2)\\n            .attr('rx', width * 0.45)\\n            .attr('ry', height * 0.45);\\n        });\\n    }\\n\\n    // Initialize\\n    drawGlobe();\\n  </script>\\n</body>\\n</html>\\n\\n\",\n  \"htmlHeight\": 400,\n  \"safeRendering\": false,\n  \"type\": 3,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":1,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"HTML","Description":"","Identifier":"fbd27bf5-43a7-4b91-80f6-4f0e27b5bcd0","Order":3,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":3,"DataDefinitionJson":"{\n  \"htmlContent\": \"<!DOCTYPE html>\\n<html>\\n\\n<head>\\n<style>\\n\\tbody {\\n\\t\\tbackground-color: #EDEFF6;\\n\\t\\tcolor: #4E4F63;\\n\\t\\tfont-family: Source Sans;\\n\\t}\\n</style>\\n</head>\\n\\n<body>\\n//enter your code here\\n</body>\\n<script>\\n\\t//This script enables the widget theme to reflect the user's choice in the platform.\\n\\t//Removing this script will result in your HTML widget permanently displayed in the light theme.\\n\\tonmessage = evt => {\\n\\t\\tfor (const [key, value] of Object.entries(evt.data)) {\\n\\t\\t\\tdocument.body.style[key] = value;\\n\\t\\t\\tdebugger;\\n\\t\\t}\\n\\t}\\n</script>\\n</html>\",\n  \"htmlHeight\": 200,\n  \"safeRendering\": false,\n  \"type\": 3,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Entities Highlights","Description":"This widget displays the highlighted fields for each entity.","Identifier":"f2213a43-3fdc-4904-82f0-511539bc5609","Order":4,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":10,"DataDefinitionJson":"{\n  \"highlightFieldConfigs\": [],\n  \"targetScope\": 0,\n  \"type\": 10,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Entities Graph","Description":"This widget includes a visual graph and other details of the Case Entities.","Identifier":"dab0db51-2965-4afe-bb4a-bfb201f75770","Order":5,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":7,"DataDefinitionJson":"{\n  \"targetScope\": 0,\n  \"type\": 7,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Insights","Description":"This widget contains all the Insights from the Playbook Insights actions, general Insights and any other Insights you have added. They will be presented in HTML format","Identifier":"0ddd6724-8495-4899-be57-c92380ca0c08","Order":6,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":15,"DataDefinitionJson":"{\n  \"insights\": null,\n  \"type\": 15,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Pending Actions","Description":"This Widget lists all playbook actions waiting for user input.","Identifier":"7eaa87b0-8ff3-4a31-89d2-5c24db050e55","Order":7,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":11,"DataDefinitionJson":"{\n  \"pendingSteps\": null,\n  \"type\": 11,\n  \"widgetDefinitionScope\": 0\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""}]},"Roles":["Administrator"]}],"WidgetTemplates":[{"Title":"HTML","Description":"","Identifier":"adbd9d01-2092-4886-ae44-aa9a1d10109f","Order":1,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":3,"DataDefinitionJson":"{\n  \"htmlContent\": \"<!doctype html>\\n<html lang=\\\"en\\\">\\n<head>\\n  <meta charset=\\\"utf-8\\\" />\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\" />\\n  <meta name=\\\"color-scheme\\\" content=\\\"light dark\\\">\\n  <title>Login Hours Widget</title>\\n\\n  <style>\\n    :root{\\n      --bg:#0b1220;\\n      --panel:#101a2e;\\n      --panel-2:#0e172a;\\n      --border:#1f2b45;\\n      --muted:#94a3b8;\\n      --text:#e5e7eb;\\n      --accent:#3b82f6;\\n      --accent-2:#22c55e;\\n      --danger:#ef4444;\\n      --shadow: 0 10px 30px rgba(0,0,0,.35);\\n      --radius: 14px;\\n      --business-hours: rgba(34,197,94,.15);\\n      --login-valid: rgba(34,197,94,.6);\\n      --login-invalid: rgba(239,68,68,.6);\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      --bg: #f1f3f4;\\n      --panel: #ffffff;\\n      --panel-2: #f8f9fa;\\n      --border: #dadce0;\\n      --muted: #5f6368;\\n      --text: #202124;\\n      --accent: #1a73e8;\\n      --accent-2: #1e8e3e;\\n      --danger: #ea4335;\\n      --shadow: 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);\\n      --business-hours: rgba(30,142,62,.1);\\n      --login-valid: rgba(30,142,62,.4);\\n      --login-invalid: rgba(234,67,53,.4);\\n    }\\n\\n    html,body{\\n      height:100%;\\n      margin:0;\\n      padding:0;\\n    }\\n    body{\\n      background: radial-gradient(900px 500px at 40% -10%, rgba(59,130,246,.18), transparent 60%),\\n                  var(--bg);\\n      color: var(--text);\\n      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, \\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\";\\n      transition: background 0.3s ease, color 0.3s ease;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      padding: clamp(5px, 1.5vw, 15px);\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      background: var(--bg);\\n    }\\n\\n    .widget-container{\\n      max-width: 800px;\\n      width: 100%;\\n      min-width: 300px;\\n      background: var(--panel);\\n      border: 1px solid var(--border);\\n      border-radius: var(--radius);\\n      box-shadow: var(--shadow);\\n      padding: clamp(6px, 1vw, 12px);\\n      height: auto;\\n      overflow: visible;\\n    }\\n\\n    .widget-header{\\n      margin-bottom: clamp(4px, 1vw, 8px);\\n      padding-bottom: clamp(3px, 0.8vw, 6px);\\n      border-bottom: 1px solid var(--border);\\n      display: block;\\n    }\\n\\n    .widget-header h2{\\n      margin: 0 0 clamp(2px, 0.5vw, 4px) 0;\\n      font-size: clamp(0.85rem, 2vw, 1.1rem);\\n      font-weight: 700;\\n      color: var(--text);\\n    }\\n\\n    .widget-header .subtitle{\\n      color: var(--muted);\\n      font-size: clamp(0.65rem, 1.5vw, 0.85rem);\\n    }\\n\\n    .login-info{\\n      display: flex;\\n      align-items: center;\\n      gap: clamp(3px, 0.8vw, 6px);\\n      padding: clamp(2px, 0.5vw, 4px) clamp(4px, 1vw, 8px);\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 4px;\\n      margin-bottom: clamp(3px, 0.8vw, 6px);\\n    }\\n\\n    .login-info .icon{\\n      width: clamp(16px, 3vw, 24px);\\n      height: clamp(16px, 3vw, 24px);\\n      border-radius: 4px;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-size: clamp(0.6rem, 1.5vw, 0.85rem);\\n      flex-shrink: 0;\\n    }\\n\\n    .login-info.valid .icon{\\n      background: linear-gradient(135deg, rgba(34,197,94,.2), rgba(16,185,129,.15));\\n      color: var(--accent-2);\\n      border: 1px solid rgba(34,197,94,.3);\\n    }\\n\\n    .login-info.invalid .icon{\\n      background: linear-gradient(135deg, rgba(239,68,68,.2), rgba(220,38,38,.15));\\n      color: var(--danger);\\n      border: 1px solid rgba(239,68,68,.3);\\n    }\\n\\n    .login-info .details{\\n      flex: 1;\\n    }\\n\\n    .login-info .label{\\n      font-size: 0.65rem;\\n      color: var(--muted);\\n      margin-bottom: 2px;\\n      display: none; /* Hide label to save space */\\n    }\\n\\n    .login-info .timestamp{\\n      font-size: clamp(0.6rem, 1.5vw, 0.8rem);\\n      font-weight: 600;\\n      color: var(--text);\\n      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;\\n    }\\n\\n    .login-info .status{\\n      padding: clamp(2px, 0.5vw, 4px) clamp(4px, 1vw, 8px);\\n      border-radius: 999px;\\n      font-size: clamp(0.55rem, 1.3vw, 0.75rem);\\n      font-weight: 600;\\n    }\\n\\n    .login-info.valid .status{\\n      background: rgba(34,197,94,.15);\\n      color: var(--accent-2);\\n      border: 1px solid rgba(34,197,94,.3);\\n    }\\n\\n    .login-info.invalid .status{\\n      background: rgba(239,68,68,.15);\\n      color: var(--danger);\\n      border: 1px solid rgba(239,68,68,.3);\\n    }\\n\\n    .calendar-container{\\n      overflow: visible;\\n      width: 100%;\\n    }\\n\\n    .calendar-grid{\\n      display: grid;\\n      grid-template-columns: clamp(30px, 8vw, 50px) repeat(24, minmax(0, 1fr));\\n      grid-template-rows: auto repeat(7, 1fr);\\n      gap: clamp(1px, 0.2vw, 2px);\\n      width: 100%;\\n      min-width: 0;\\n      align-items: stretch;\\n      justify-items: stretch;\\n    }\\n    \\n    .calendar-grid > * {\\n      min-width: 0;\\n      box-sizing: border-box;\\n      align-self: stretch;\\n    }\\n\\n    .hour-label{\\n      padding: clamp(1px, 0.3vw, 3px);\\n      text-align: center;\\n      font-size: clamp(0.4rem, 1.2vw, 0.6rem);\\n      color: var(--muted);\\n      font-weight: 600;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      line-height: 1.2;\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 2px;\\n      writing-mode: horizontal-tb;\\n      box-sizing: border-box;\\n      margin: 0;\\n      min-height: clamp(18px, 3.5vh, 22px);\\n    }\\n\\n    .day-header{\\n      padding: clamp(2px, 0.5vw, 4px) clamp(1px, 0.3vw, 3px);\\n      text-align: center;\\n      font-weight: 600;\\n      font-size: clamp(0.5rem, 1.4vw, 0.7rem);\\n      color: var(--text);\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 2px;\\n      writing-mode: horizontal-tb;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      flex-direction: column;\\n      box-sizing: border-box;\\n      margin: 0;\\n      min-height: clamp(18px, 3.5vh, 22px);\\n    }\\n\\n    .day-header .day-name{\\n      display: block;\\n    }\\n\\n    .day-header .day-date{\\n      font-size: clamp(0.4rem, 1vw, 0.55rem);\\n      color: var(--muted);\\n      font-weight: 500;\\n      display: block;\\n      margin-top: clamp(1px, 0.3vw, 2px);\\n    }\\n\\n    .time-cell{\\n      border: 1px solid var(--border);\\n      border-radius: 1px;\\n      position: relative;\\n      transition: all 0.2s ease;\\n      width: 100%;\\n      min-height: clamp(18px, 3.5vh, 22px);\\n      box-sizing: border-box;\\n      margin: 0;\\n      padding: 0;\\n      display: block;\\n    }\\n\\n    .time-cell.daytime{\\n      background: rgba(255,255,255,.02);\\n    }\\n\\n    .time-cell.nighttime{\\n      background: rgba(0,0,0,.05);\\n    }\\n\\n    .time-cell.business-hours{\\n      background: var(--business-hours) !important;\\n      border-color: rgba(34,197,94,.3);\\n    }\\n\\n    body.light-theme .time-cell.daytime{\\n      background: rgba(0,0,0,.01);\\n    }\\n\\n    body.light-theme .time-cell.nighttime{\\n      background: rgba(0,0,0,.03);\\n    }\\n\\n    .time-cell.login-event{\\n      border-width: 2px;\\n      box-shadow: 0 0 0 2px var(--bg);\\n    }\\n\\n    .time-cell.login-event.valid{\\n      background: var(--login-valid);\\n      border-color: var(--accent-2);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 12px rgba(34,197,94,.4);\\n    }\\n\\n    .time-cell.login-event.invalid{\\n      background: var(--danger);\\n      border-color: var(--danger);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 12px rgba(239,68,68,.4);\\n    }\\n\\n    .time-cell.login-event::after{\\n      content: '‚óè';\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, -50%);\\n      font-size: 0.5rem;\\n      line-height: 1;\\n    }\\n\\n    .legend{\\n      display: none; /* Hide legend to save space */\\n      gap: 12px;\\n      margin-top: 8px;\\n      padding-top: 8px;\\n      border-top: 1px solid var(--border);\\n      flex-wrap: wrap;\\n    }\\n\\n    .legend-item{\\n      display: flex;\\n      align-items: center;\\n      gap: 4px;\\n      font-size: 0.65rem;\\n      color: var(--text);\\n    }\\n\\n    .legend-color{\\n      width: 12px;\\n      height: 12px;\\n      border-radius: 2px;\\n      border: 1px solid var(--border);\\n    }\\n\\n    .legend-color.business-hours{\\n      background: var(--business-hours);\\n      border-color: rgba(34,197,94,.2);\\n    }\\n\\n    .legend-color.valid{\\n      background: var(--login-valid);\\n      border-color: var(--accent-2);\\n    }\\n\\n    .legend-color.invalid{\\n      background: var(--login-invalid);\\n      border-color: var(--danger);\\n    }\\n\\n    @media (max-width: 768px){\\n      .widget-container{\\n        max-width: 100%;\\n        padding: clamp(4px, 1.5vw, 8px);\\n      }\\n      .calendar-grid{\\n        grid-template-columns: clamp(25px, 6vw, 40px) repeat(24, minmax(0, 1fr));\\n        min-width: 0;\\n      }\\n    }\\n\\n    @media (max-width: 480px){\\n      .widget-container{\\n        max-height: min(320px, 50vh);\\n      }\\n      .calendar-container{\\n        max-height: min(280px, 45vh);\\n      }\\n      .calendar-grid{\\n        grid-template-rows: clamp(14px, 2.5vh, 18px) repeat(7, minmax(clamp(18px, 2.5vh, 22px), 1fr));\\n      }\\n    }\\n  </style>\\n</head>\\n\\n<body>\\n  <div class=\\\"widget-container\\\">\\n    <div class=\\\"widget-header\\\">\\n      <h2>Outside of Business Hours</h2>\\n      <div class=\\\"subtitle\\\">Weekly view showing business hours and login events</div>\\n    </div>\\n\\n    <div id=\\\"loginInfo\\\" class=\\\"login-info\\\">\\n      <div class=\\\"icon\\\">üîê</div>\\n      <div class=\\\"details\\\">\\n        <div class=\\\"label\\\">Login Timestamp</div>\\n        <div class=\\\"timestamp\\\" id=\\\"loginTimestamp\\\">Loading...</div>\\n      </div>\\n      <div class=\\\"status\\\" id=\\\"loginStatus\\\">Checking...</div>\\n    </div>\\n\\n    <div class=\\\"calendar-container\\\">\\n      <div class=\\\"calendar-grid\\\" id=\\\"calendarGrid\\\">\\n        <!-- Grid will be generated by JavaScript -->\\n      </div>\\n    </div>\\n\\n    <div class=\\\"legend\\\">\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color business-hours\\\"></div>\\n        <span>Business Hours (9 AM - 5 PM)</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color valid\\\"></div>\\n        <span>Valid Login (Within Business Hours)</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color invalid\\\"></div>\\n        <span>Invalid Login (Outside Business Hours)</span>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <script>\\n    // Business hours configuration (9 AM - 5 PM)\\n    const BUSINESS_HOURS_START = 9;\\n    const BUSINESS_HOURS_END = 17; // 5 PM\\n\\n    // Get timestamp from URL parameter or use default (outside business hours)\\n    function getTimestampFromURL() {\\n      const urlParams = new URLSearchParams(window.location.search);\\n      const timestamp = urlParams.get('timestamp');\\n      if (timestamp) {\\n        return new Date(timestamp);\\n      }\\n      // Default: Saturday at 11 PM (outside business hours)\\n      const defaultDate = new Date();\\n      const currentDay = defaultDate.getDay();\\n      const daysUntilSaturday = currentDay === 6 ? 0 : (6 - currentDay + 7) % 7; // Today if Saturday, else next Saturday\\n      defaultDate.setDate(defaultDate.getDate() + daysUntilSaturday);\\n      defaultDate.setHours(23, 0, 0, 0); // 11 PM\\n      return defaultDate;\\n    }\\n\\n    const loginTimestamp = getTimestampFromURL();\\n    const loginDay = loginTimestamp.getDay(); // 0 = Sunday, 6 = Saturday\\n    const loginHour = loginTimestamp.getHours();\\n    const loginMinute = loginTimestamp.getMinutes();\\n\\n    // Check if login is within business hours\\n    const isWithinBusinessHours = loginDay >= 1 && loginDay <= 5 && // Monday to Friday\\n                                   loginHour >= BUSINESS_HOURS_START && \\n                                   loginHour < BUSINESS_HOURS_END;\\n\\n    // Format timestamp for display - compact format\\n    function formatTimestamp(date) {\\n      const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\\n      const dayName = days[date.getDay()];\\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\\n      const day = date.getDate().toString().padStart(2, '0');\\n      const hours = date.getHours().toString().padStart(2, '0');\\n      const minutes = date.getMinutes().toString().padStart(2, '0');\\n      return `${dayName} ${month}/${day} ${hours}:${minutes}`;\\n    }\\n\\n    // Update login info display\\n    const loginInfo = document.getElementById('loginInfo');\\n    const loginTimestampEl = document.getElementById('loginTimestamp');\\n    const loginStatusEl = document.getElementById('loginStatus');\\n\\n    loginTimestampEl.textContent = formatTimestamp(loginTimestamp);\\n    \\n    if (isWithinBusinessHours) {\\n      loginInfo.classList.add('valid');\\n      loginInfo.classList.remove('invalid');\\n      loginStatusEl.textContent = 'Valid';\\n    } else {\\n      loginInfo.classList.add('invalid');\\n      loginInfo.classList.remove('valid');\\n      loginStatusEl.textContent = 'Outside of business hours';\\n    }\\n\\n    // Generate calendar grid - 7 days x 24 hours\\n    function generateCalendar() {\\n      const grid = document.getElementById('calendarGrid');\\n      const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\\n      \\n      // Get the start of the week (Sunday) based on the login date\\n      const weekStart = new Date(loginTimestamp);\\n      weekStart.setDate(loginTimestamp.getDate() - loginTimestamp.getDay());\\n      weekStart.setHours(0, 0, 0, 0); // Normalize to midnight\\n      \\n      // Header row: empty cell + 24 hour labels\\n      const emptyHeader = document.createElement('div');\\n      emptyHeader.className = 'day-header';\\n      grid.appendChild(emptyHeader);\\n      \\n      for (let hour = 0; hour < 24; hour++) {\\n        const hourLabel = document.createElement('div');\\n        hourLabel.className = 'hour-label';\\n        const displayHour = hour === 0 ? '12A' : hour < 12 ? `${hour}A` : hour === 12 ? '12P' : `${hour - 12}P`;\\n        \\n        // Add emoji for day/night indication\\n        let emoji = '';\\n        if (hour === 6) {\\n          emoji = 'üåÖ '; // Sunrise\\n        } else if (hour === 18) {\\n          emoji = 'üåÜ '; // Sunset\\n        } else if (hour >= 6 && hour < 18) {\\n          emoji = '‚òÄÔ∏è '; // Daytime\\n        } else {\\n          emoji = 'üåô '; // Nighttime\\n        }\\n        \\n        hourLabel.textContent = emoji + displayHour;\\n        grid.appendChild(hourLabel);\\n      }\\n\\n      // Generate 7 day rows, each with day header + 24 hour cells\\n      for (let dayOffset = 0; dayOffset < 7; dayOffset++) {\\n        const currentDay = new Date(weekStart);\\n        currentDay.setDate(weekStart.getDate() + dayOffset);\\n        currentDay.setHours(0, 0, 0, 0); // Normalize to midnight for date comparison\\n        const dayOfWeek = currentDay.getDay();\\n        \\n        // Day header\\n        const dayHeader = document.createElement('div');\\n        dayHeader.className = 'day-header';\\n        dayHeader.innerHTML = `\\n          <span class=\\\"day-name\\\">${days[dayOfWeek]}</span>\\n          <span class=\\\"day-date\\\">${currentDay.getMonth() + 1}/${currentDay.getDate()}</span>\\n        `;\\n        grid.appendChild(dayHeader);\\n\\n        // 24 hour cells for this day\\n        for (let hour = 0; hour < 24; hour++) {\\n          const cell = document.createElement('div');\\n          cell.className = 'time-cell';\\n          \\n          // Add daytime/nighttime class (daytime: 6 AM - 6 PM)\\n          if (hour >= 6 && hour < 18) {\\n            cell.classList.add('daytime');\\n          } else {\\n            cell.classList.add('nighttime');\\n          }\\n          \\n          // Check if this is business hours (Monday-Friday, 9 AM - 5 PM)\\n          const isBusinessHour = dayOfWeek >= 1 && dayOfWeek <= 5 && \\n                                 hour >= BUSINESS_HOURS_START && hour < BUSINESS_HOURS_END;\\n          \\n          if (isBusinessHour) {\\n            cell.classList.add('business-hours');\\n          }\\n\\n          // Check if this is the login event - compare date components directly\\n          const isLoginEvent = currentDay.getFullYear() === loginTimestamp.getFullYear() &&\\n                              currentDay.getMonth() === loginTimestamp.getMonth() &&\\n                              currentDay.getDate() === loginTimestamp.getDate() &&\\n                              hour === loginHour;\\n          \\n          if (isLoginEvent) {\\n            cell.classList.add('login-event');\\n            if (isWithinBusinessHours) {\\n              cell.classList.add('valid');\\n            } else {\\n              cell.classList.add('invalid');\\n            }\\n          }\\n\\n          grid.appendChild(cell);\\n        }\\n      }\\n    }\\n\\n    generateCalendar();\\n  </script>\\n</body>\\n</html>\\n\\n\",\n  \"htmlHeight\": 400,\n  \"safeRendering\": false,\n  \"type\": 3,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":1,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"HTML","Description":"","Identifier":"b1011ebe-bf77-4f87-a48e-74691e602bdd","Order":2,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":3,"DataDefinitionJson":"{\n  \"htmlContent\": \"<!doctype html>\\n<html lang=\\\"en\\\">\\n<head>\\n  <meta charset=\\\"utf-8\\\" />\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\" />\\n  <meta name=\\\"color-scheme\\\" content=\\\"light dark\\\">\\n  <title>Globe Travel Widget</title>\\n  <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\\n  <script src=\\\"https://cdn.jsdelivr.net/npm/topojson@3\\\"></script>\\n\\n  <style>\\n    :root{\\n      --bg:#0b1220;\\n      --panel:#101a2e;\\n      --panel-2:#0e172a;\\n      --border:#1f2b45;\\n      --muted:#94a3b8;\\n      --text:#e5e7eb;\\n      --accent:#3b82f6;\\n      --accent-2:#22c55e;\\n      --danger:#ef4444;\\n      --shadow: 0 10px 30px rgba(0,0,0,.35);\\n      --radius: 14px;\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      --bg: #f1f3f4;\\n      --panel: #ffffff;\\n      --panel-2: #f8f9fa;\\n      --border: #dadce0;\\n      --muted: #5f6368;\\n      --text: #202124;\\n      --accent: #1a73e8;\\n      --accent-2: #1e8e3e;\\n      --danger: #ea4335;\\n      --shadow: 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);\\n    }\\n\\n    html,body{\\n      height:100%;\\n      margin:0;\\n      padding:0;\\n    }\\n    body{\\n      background: radial-gradient(900px 500px at 40% -10%, rgba(59,130,246,.18), transparent 60%),\\n                  var(--bg);\\n      color: var(--text);\\n      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, \\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\";\\n      transition: background 0.3s ease, color 0.3s ease;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      padding: 10px;\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      background: var(--bg);\\n    }\\n\\n    .widget-container{\\n      max-width: 800px;\\n      width: 100%;\\n      background: var(--panel);\\n      border: 1px solid var(--border);\\n      border-radius: var(--radius);\\n      box-shadow: var(--shadow);\\n      padding: 8px;\\n      max-height: 280px;\\n      overflow: visible;\\n    }\\n\\n    .widget-header{\\n      margin-bottom: 6px;\\n      padding-bottom: 4px;\\n      border-bottom: 1px solid var(--border);\\n    }\\n\\n    .widget-header h2{\\n      margin: 0 0 4px 0;\\n      font-size: 1rem;\\n      font-weight: 700;\\n      color: var(--text);\\n    }\\n\\n    .widget-header .subtitle{\\n      color: var(--muted);\\n      font-size: 0.75rem;\\n    }\\n\\n    .cities-info{\\n      display: flex;\\n      align-items: center;\\n      justify-content: space-between;\\n      gap: 12px;\\n      padding: 4px 8px;\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 6px;\\n      margin-bottom: 6px;\\n      font-size: 0.7rem;\\n    }\\n\\n    .city{\\n      display: flex;\\n      align-items: center;\\n      gap: 6px;\\n    }\\n\\n    .city-dot{\\n      width: 8px;\\n      height: 8px;\\n      border-radius: 50%;\\n      flex-shrink: 0;\\n    }\\n\\n    .city-dot.origin{\\n      background: var(--accent);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 8px rgba(59,130,246,.5);\\n    }\\n\\n    .city-dot.destination{\\n      background: var(--accent-2);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 8px rgba(34,197,94,.5);\\n    }\\n\\n    .city-name{\\n      font-weight: 600;\\n      color: var(--text);\\n    }\\n\\n    .distance-info{\\n      color: var(--muted);\\n      font-size: 0.65rem;\\n    }\\n\\n    .globe-container{\\n      width: 100%;\\n      height: 200px;\\n      position: relative;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      overflow: visible;\\n    }\\n\\n    .globe-svg{\\n      width: 100%;\\n      height: 100%;\\n      max-width: 100%;\\n      max-height: 200px;\\n    }\\n\\n    .globe-circle{\\n      fill: rgba(59,130,246,.15);\\n      stroke: rgba(59,130,246,.4);\\n      stroke-width: 2;\\n    }\\n\\n    .globe-circle-shadow{\\n      fill: rgba(59,130,246,.05);\\n      stroke: none;\\n    }\\n\\n    .globe-grid{\\n      fill: none;\\n      stroke: rgba(148,163,184,.25);\\n      stroke-width: 0.5;\\n    }\\n\\n    .globe-continent{\\n      fill: rgba(34,197,94,.1);\\n      stroke: rgba(34,197,94,.2);\\n      stroke-width: 0.5;\\n    }\\n\\n    .travel-line{\\n      fill: none;\\n      stroke: var(--accent);\\n      stroke-width: 2;\\n      opacity: 0.8;\\n      filter: drop-shadow(0 0 4px rgba(59,130,246,.6));\\n    }\\n\\n    .city-marker{\\n      fill: var(--accent);\\n      filter: drop-shadow(0 0 4px rgba(59,130,246,.8));\\n    }\\n\\n    .city-marker.destination{\\n      fill: var(--accent-2);\\n      filter: drop-shadow(0 0 4px rgba(34,197,94,.8));\\n    }\\n\\n    .city-label{\\n      font-size: 0.6rem;\\n      fill: var(--text);\\n      font-weight: 600;\\n      text-anchor: middle;\\n      dominant-baseline: middle;\\n    }\\n\\n    body.light-theme .globe-circle{\\n      fill: rgba(26,115,232,.08);\\n      stroke: rgba(26,115,232,.2);\\n    }\\n\\n    body.light-theme .globe-grid{\\n      stroke: rgba(95,99,104,.15);\\n    }\\n  </style>\\n</head>\\n\\n<body>\\n  <div class=\\\"widget-container\\\">\\n    <div class=\\\"widget-header\\\">\\n      <h2>Travel Distance</h2>\\n      <div class=\\\"subtitle\\\">Great circle route between cities</div>\\n    </div>\\n\\n    <div class=\\\"cities-info\\\" id=\\\"citiesInfo\\\">\\n      <div class=\\\"city\\\">\\n        <div class=\\\"city-dot origin\\\"></div>\\n        <span class=\\\"city-name\\\" id=\\\"originCity\\\">Kansas City</span>\\n      </div>\\n      <div class=\\\"distance-info\\\" id=\\\"distanceInfo\\\">Calculating...</div>\\n      <div class=\\\"city\\\">\\n        <div class=\\\"city-dot destination\\\"></div>\\n        <span class=\\\"city-name\\\" id=\\\"destinationCity\\\">Philadelphia</span>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"globe-container\\\">\\n      <svg class=\\\"globe-svg\\\" id=\\\"globeSvg\\\" viewBox=\\\"0 0 400 200\\\" preserveAspectRatio=\\\"xMidYMid meet\\\">\\n        <!-- Globe will be drawn dynamically -->\\n      </svg>\\n    </div>\\n  </div>\\n\\n  <script>\\n    // City coordinates (latitude, longitude)\\n    const cityCoordinates = {\\n      'Kansas City': { lat: 39.0997, lon: -94.5786 },\\n      'Philadelphia': { lat: 39.9526, lon: -75.1652 },\\n      'New York': { lat: 40.7128, lon: -74.0060 },\\n      'Los Angeles': { lat: 34.0522, lon: -118.2437 },\\n      'Chicago': { lat: 41.8781, lon: -87.6298 },\\n      'Houston': { lat: 29.7604, lon: -95.3698 },\\n      'Phoenix': { lat: 33.4484, lon: -112.0740 },\\n      'San Antonio': { lat: 29.4241, lon: -98.4936 },\\n      'San Diego': { lat: 32.7157, lon: -117.1611 },\\n      'Dallas': { lat: 32.7767, lon: -96.7970 }\\n    };\\n\\n    // Get cities from URL parameters or use defaults\\n    function getCitiesFromURL() {\\n      const urlParams = new URLSearchParams(window.location.search);\\n      const origin = urlParams.get('origin') || 'Kansas City';\\n      const destination = urlParams.get('destination') || 'Philadelphia';\\n      return { origin, destination };\\n    }\\n\\n    const { origin, destination } = getCitiesFromURL();\\n\\n    // Update city names in UI\\n    document.getElementById('originCity').textContent = origin;\\n    document.getElementById('destinationCity').textContent = destination;\\n\\n\\n    // Calculate great circle distance (Haversine formula)\\n    function calculateDistance(lat1, lon1, lat2, lon2) {\\n      const R = 6371; // Earth radius in km\\n      const dLat = (lat2 - lat1) * Math.PI / 180;\\n      const dLon = (lon2 - lon1) * Math.PI / 180;\\n      const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\\n                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\\n                Math.sin(dLon/2) * Math.sin(dLon/2);\\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\\n      return R * c;\\n    }\\n\\n    // Generate great circle path points\\n    function generateGreatCirclePath(lat1, lon1, lat2, lon2, numPoints = 50) {\\n      const points = [];\\n      for (let i = 0; i <= numPoints; i++) {\\n        const t = i / numPoints;\\n        const lat = lat1 + (lat2 - lat1) * t;\\n        const lon = lon1 + (lon2 - lon1) * t;\\n        points.push({ lat, lon });\\n      }\\n      return points;\\n    }\\n\\n    // Draw the world map with travel path using D3.js\\n    function drawGlobe() {\\n      const originCoords = cityCoordinates[origin];\\n      const destCoords = cityCoordinates[destination];\\n\\n      if (!originCoords || !destCoords) {\\n        console.error('City coordinates not found');\\n        return;\\n      }\\n\\n      // Calculate distance\\n      const distance = calculateDistance(\\n        originCoords.lat, originCoords.lon,\\n        destCoords.lat, destCoords.lon\\n      );\\n      const distanceMiles = (distance * 0.621371).toFixed(0);\\n      document.getElementById('distanceInfo').textContent = `${distanceMiles} mi (${distance.toFixed(0)} km)`;\\n\\n      const svg = d3.select('#globeSvg');\\n      svg.selectAll('*').remove();\\n\\n      const width = 400;\\n      const height = 200;\\n\\n      // Calculate center and scale to fit both cities\\n      const centerLon = (originCoords.lon + destCoords.lon) / 2;\\n      const centerLat = (originCoords.lat + destCoords.lat) / 2;\\n      const lonRange = Math.abs(destCoords.lon - originCoords.lon);\\n      const latRange = Math.abs(destCoords.lat - originCoords.lat);\\n      const maxRange = Math.max(lonRange, latRange);\\n      \\n      // Scale to fit the cities with padding - increased zoom\\n      const scale = maxRange > 20 ? 400 : maxRange > 10 ? 600 : maxRange > 5 ? 1000 : 1500;\\n\\n      // Create projection - use geoMercator for world map\\n      const projection = d3.geoMercator()\\n        .scale(scale)\\n        .translate([width / 2, height / 2])\\n        .center([centerLon, centerLat]);\\n\\n      const path = d3.geoPath().projection(projection);\\n\\n      // Load world map data\\n      d3.json('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json')\\n        .then(world => {\\n          // Draw countries\\n          svg.append('g')\\n            .selectAll('path')\\n            .data(topojson.feature(world, world.objects.countries).features)\\n            .enter()\\n            .append('path')\\n            .attr('d', path)\\n            .attr('class', 'globe-continent')\\n            .attr('fill', 'rgba(34,197,94,.08)')\\n            .attr('stroke', 'rgba(148,163,184,.2)')\\n            .attr('stroke-width', 0.5);\\n\\n          // Draw travel path (great circle)\\n          const pathPoints = generateGreatCirclePath(\\n            originCoords.lat, originCoords.lon,\\n            destCoords.lat, destCoords.lon,\\n            100\\n          );\\n\\n          const lineData = pathPoints.map(p => [p.lon, p.lat]);\\n          const lineGenerator = d3.line()\\n            .x(d => projection(d)[0])\\n            .y(d => projection(d)[1])\\n            .curve(d3.curveLinear);\\n\\n          svg.append('path')\\n            .datum(lineData)\\n            .attr('class', 'travel-line')\\n            .attr('d', lineGenerator)\\n            .attr('fill', 'none')\\n            .attr('stroke', 'var(--accent)')\\n            .attr('stroke-width', 2)\\n            .attr('opacity', 0.8);\\n\\n          // Draw city markers\\n          const originProj = projection([originCoords.lon, originCoords.lat]);\\n          const destProj = projection([destCoords.lon, destCoords.lat]);\\n\\n          // Origin marker\\n          svg.append('circle')\\n            .attr('class', 'city-marker')\\n            .attr('cx', originProj[0])\\n            .attr('cy', originProj[1])\\n            .attr('r', 6)\\n            .attr('fill', 'var(--accent)');\\n\\n          svg.append('text')\\n            .attr('class', 'city-label')\\n            .attr('x', originProj[0])\\n            .attr('y', originProj[1] - 12)\\n            .attr('text-anchor', 'middle')\\n            .text(origin);\\n\\n          // Destination marker\\n          svg.append('circle')\\n            .attr('class', 'city-marker destination')\\n            .attr('cx', destProj[0])\\n            .attr('cy', destProj[1])\\n            .attr('r', 6)\\n            .attr('fill', 'var(--accent-2)');\\n\\n          svg.append('text')\\n            .attr('class', 'city-label')\\n            .attr('x', destProj[0])\\n            .attr('y', destProj[1] - 12)\\n            .attr('text-anchor', 'middle')\\n            .text(destination);\\n        })\\n        .catch(error => {\\n          console.error('Error loading world map:', error);\\n          // Fallback: draw simple map outline\\n          svg.append('ellipse')\\n            .attr('class', 'globe-circle')\\n            .attr('cx', width / 2)\\n            .attr('cy', height / 2)\\n            .attr('rx', width * 0.45)\\n            .attr('ry', height * 0.45);\\n        });\\n    }\\n\\n    // Initialize\\n    drawGlobe();\\n  </script>\\n</body>\\n</html>\\n\\n\",\n  \"htmlHeight\": 400,\n  \"safeRendering\": false,\n  \"type\": 3,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":1,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"HTML","Description":"","Identifier":"fbd27bf5-43a7-4b91-80f6-4f0e27b5bcd0","Order":3,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":3,"DataDefinitionJson":"{\n  \"htmlContent\": \"<!DOCTYPE html>\\n<html>\\n\\n<head>\\n<style>\\n\\tbody {\\n\\t\\tbackground-color: #EDEFF6;\\n\\t\\tcolor: #4E4F63;\\n\\t\\tfont-family: Source Sans;\\n\\t}\\n</style>\\n</head>\\n\\n<body>\\n//enter your code here\\n</body>\\n<script>\\n\\t//This script enables the widget theme to reflect the user's choice in the platform.\\n\\t//Removing this script will result in your HTML widget permanently displayed in the light theme.\\n\\tonmessage = evt => {\\n\\t\\tfor (const [key, value] of Object.entries(evt.data)) {\\n\\t\\t\\tdocument.body.style[key] = value;\\n\\t\\t\\tdebugger;\\n\\t\\t}\\n\\t}\\n</script>\\n</html>\",\n  \"htmlHeight\": 200,\n  \"safeRendering\": false,\n  \"type\": 3,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Entities Highlights","Description":"This widget displays the highlighted fields for each entity.","Identifier":"f2213a43-3fdc-4904-82f0-511539bc5609","Order":4,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":10,"DataDefinitionJson":"{\n  \"highlightFieldConfigs\": [],\n  \"targetScope\": 0,\n  \"type\": 10,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Entities Graph","Description":"This widget includes a visual graph and other details of the Case Entities.","Identifier":"dab0db51-2965-4afe-bb4a-bfb201f75770","Order":5,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":7,"DataDefinitionJson":"{\n  \"targetScope\": 0,\n  \"type\": 7,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Insights","Description":"This widget contains all the Insights from the Playbook Insights actions, general Insights and any other Insights you have added. They will be presented in HTML format","Identifier":"0ddd6724-8495-4899-be57-c92380ca0c08","Order":6,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":15,"DataDefinitionJson":"{\n  \"insights\": null,\n  \"type\": 15,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Pending Actions","Description":"This Widget lists all playbook actions waiting for user input.","Identifier":"7eaa87b0-8ff3-4a31-89d2-5c24db050e55","Order":7,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":11,"DataDefinitionJson":"{\n  \"pendingSteps\": null,\n  \"type\": 11,\n  \"widgetDefinitionScope\": 0\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""}],"Definition":{"Identifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","IsEnable":true,"Version":0.0,"IsArchived":false,"IsAutomatic":false,"Name":"Login From Outside Of Business Hours","Category":21,"Description":"","Priority":2,"Creator":"Siemplify automation","VersionCreator":null,"VersionComment":null,"OriginalWorkflowIdentifier":"ce0c5276-7837-4355-8ce0-f86903ff7b7e","TemplateName":null,"PlaybookType":0,"IsDebugMode":false,"DebugBaseAlertIdentifier":null,"DebugAlertIdentifier":null,"SimulationClone":false,"DefaultAccessLevel":2,"CreationSource":1,"Steps":[{"Identifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","OriginalStepIdentifier":"5d524169-78c1-4f05-9708-41f0cb697ef1","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","ParentStepIdentifiers":["d3fea743-3891-4c09-9666-6153a3ef1acf"],"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","PreviousResultCondition":"{\"d3fea743-3891-4c09-9666-6153a3ef1acf\":\"1\"}","InstanceName":"Update Instructions 1","IsAutomatic":true,"Name":"Siemplify_Add General Insight","IsSkippable":false,"Description":"Add a general insight configurable message to the case","ActionProvider":"Scripts","ActionName":"Siemplify_Add General Insight","Type":0,"Integration":"Siemplify","Parameters":[{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"AssignedUsers","Value":null},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"DynamicInjectionInstancePlaceholder","Value":""},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"FallbackIntegrationInstance","Value":null},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"FetchInstanceByName","Value":"false"},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"HasApprovalLink","Value":null},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"IntegrationInstance","Value":"f8ca163b-8861-45b0-973b-40f105bd7d4a"},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"MessageToAssignee","Value":null},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"PendingActionTimeout","Value":null},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"RetryConfiguration","Value":"{\"Enabled\":false,\"IntervalInSeconds\":30,\"NumberOfRetries\":1}"},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"ScriptName","Value":"Siemplify_Add General Insight"},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"ScriptParametersEntityFields","Value":"{\"Title\":\"Next Steps\",\"Message\":\"Increase Priority to High and assign to @Tier 2\",\"Triggered By\":\"Condition for User Location\"}"},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"SelectedScopeName","Value":"All entities"},{"ParentStepIdentifier":"152a972d-4b3e-4fcb-af02-4e3006934f11","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"UseEntitiesLoopScope","Value":null}],"AutoSkipOnFailure":false,"IsDebugMockData":false,"StepDebugData":{"CreationTimeUnixTimeInMs":0,"ModificationTimeUnixTimeInMs":0,"OriginalWorkflowIdentifier":"ce0c5276-7837-4355-8ce0-f86903ff7b7e","OriginalStepIdentifier":"5d524169-78c1-4f05-9708-41f0cb697ef1","ResultValue":"","ResultJson":"","ScopeEntitiesEnrichmentData":[],"ScopeEntitiesEnrichmentDataJson":"[]"},"ParentStepContainerId":null,"IsTouchedByAi":false,"StartLoopStepIdentifier":null,"ParallelActions":[]},{"Identifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","OriginalStepIdentifier":"7632f2ee-83d4-4c81-8cfd-7117ba236fb2","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","ParentStepIdentifiers":["d3fea743-3891-4c09-9666-6153a3ef1acf"],"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","PreviousResultCondition":"{\"d3fea743-3891-4c09-9666-6153a3ef1acf\":\"2\"}","InstanceName":"Update  Instructions 2","IsAutomatic":true,"Name":"Siemplify_Add General Insight","IsSkippable":false,"Description":"Add a general insight configurable message to the case","ActionProvider":"Scripts","ActionName":"Siemplify_Add General Insight","Type":0,"Integration":"Siemplify","Parameters":[{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"AssignedUsers","Value":null},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"DynamicInjectionInstancePlaceholder","Value":""},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"FallbackIntegrationInstance","Value":null},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"FetchInstanceByName","Value":"false"},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"HasApprovalLink","Value":null},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"IntegrationInstance","Value":"f8ca163b-8861-45b0-973b-40f105bd7d4a"},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"MessageToAssignee","Value":null},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"PendingActionTimeout","Value":null},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"RetryConfiguration","Value":"{\"Enabled\":false,\"IntervalInSeconds\":30,\"NumberOfRetries\":1}"},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"ScriptName","Value":"Siemplify_Add General Insight"},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"ScriptParametersEntityFields","Value":"{\"Title\":\"Next Steps\",\"Message\":\"Close Case and Tag as False Positive\",\"Triggered By\":\"\"}"},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"SelectedScopeName","Value":"All entities"},{"ParentStepIdentifier":"3c73bcc3-5a9f-4088-b615-869cfc75bccf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"UseEntitiesLoopScope","Value":null}],"AutoSkipOnFailure":false,"IsDebugMockData":false,"StepDebugData":null,"ParentStepContainerId":null,"IsTouchedByAi":false,"StartLoopStepIdentifier":null,"ParallelActions":[]},{"Identifier":"7159eda2-748c-478d-beae-af92969864b9","OriginalStepIdentifier":"f3279f23-9b8e-494a-adde-7c798abf42d7","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","ParentStepIdentifiers":[],"ParentStepIdentifier":"","PreviousResultCondition":"{}","InstanceName":"Change Stage","IsAutomatic":true,"Name":"Siemplify_Change Case Stage","IsSkippable":false,"Description":"Change case stage to handling","ActionProvider":"Scripts","ActionName":"Siemplify_Change Case Stage","Type":0,"Integration":"Siemplify","Parameters":[{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"AssignedUsers","Value":null},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"AsyncActionTimeout","Value":"86400"},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"AsyncPollingInterval","Value":"3600"},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"DynamicInjectionInstancePlaceholder","Value":""},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"FallbackIntegrationInstance","Value":null},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"FetchInstanceByName","Value":"false"},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"HasApprovalLink","Value":null},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"IntegrationInstance","Value":"f8ca163b-8861-45b0-973b-40f105bd7d4a"},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"MessageToAssignee","Value":null},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"PendingActionTimeout","Value":null},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"RetryConfiguration","Value":"{\"Enabled\":false,\"IntervalInSeconds\":30,\"NumberOfRetries\":1}"},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"ScriptName","Value":"Siemplify_Change Case Stage"},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"ScriptParametersEntityFields","Value":"{\"Stage\":\"Triage\"}"},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"SelectedScopeName","Value":"All entities"},{"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"UseEntitiesLoopScope","Value":null}],"AutoSkipOnFailure":false,"IsDebugMockData":false,"StepDebugData":null,"ParentStepContainerId":null,"IsTouchedByAi":false,"StartLoopStepIdentifier":null,"ParallelActions":[]},{"Identifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","OriginalStepIdentifier":"79bf2f3e-c17a-400c-a182-5cc3c7a6140c","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","ParentStepIdentifiers":["7159eda2-748c-478d-beae-af92969864b9"],"ParentStepIdentifier":"7159eda2-748c-478d-beae-af92969864b9","PreviousResultCondition":"{}","InstanceName":"Check Location","IsAutomatic":true,"Name":"Condition","IsSkippable":false,"Description":"This condition determines the progress of the playbook. Conditions are built based on cases data (cases, alerts, vents, entities and environment properties) as-well as data that comes back from previous playbook steps.","ActionProvider":"Flow","ActionName":"IfFlowCondition","Type":4,"Integration":"Flow","Parameters":[{"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"AssignedUsers","Value":null},{"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"Branches","Value":"[{\"LogicalOperator\":0,\"Conditions\":[{\"Operator\":5,\"FieldName\":\"[Event.principal_location]\",\"Type\":7,\"Value\":\"[Event.login_location]\",\"CustomOperatorName\":null}],\"Order\":1,\"IsDefaultBranch\":false,\"Name\":\"Check User Location\"},{\"LogicalOperator\":0,\"Conditions\":[],\"Order\":2,\"IsDefaultBranch\":true,\"Name\":\"Branch\"}]"},{"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"DynamicInjectionInstancePlaceholder","Value":null},{"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"ErrorFallbackBranch","Value":null},{"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"FetchInstanceByName","Value":null},{"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"HasApprovalLink","Value":null},{"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"MessageToAssignee","Value":null},{"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"PendingActionTimeout","Value":null},{"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"SelectedScopeName","Value":"All entities"},{"ParentStepIdentifier":"d3fea743-3891-4c09-9666-6153a3ef1acf","ParentWorkflowIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Name":"UseEntitiesLoopScope","Value":"true"}],"AutoSkipOnFailure":false,"IsDebugMockData":false,"StepDebugData":null,"ParentStepContainerId":null,"IsTouchedByAi":false,"StartLoopStepIdentifier":null,"ParallelActions":[]}],"Triggers":[{"Identifier":"1aaeb8e6-ed4f-495a-9fb5-a6bc5c5a7e96","IsEnabled":true,"DefinitionIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Type":2,"WorkflowName":null,"LogicalOperator":0,"Conditions":[{"FieldName":"","MatchType":0,"Value":"Login From Outside Of Business Hours","CustomOperatorName":null}],"Environments":["lab-test-2"]}],"OverviewTemplates":[{"Identifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Name":"SOAR view","Creator":null,"PlaybookDefinitionIdentifier":"7c6eff0a-ea65-46a6-9605-c3a04d506ffe","Type":0,"AlertRuleType":null,"Roles":[],"Widgets":[{"Title":"HTML","Description":"","Identifier":"adbd9d01-2092-4886-ae44-aa9a1d10109f","Order":1,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":3,"DataDefinitionJson":"{\n  \"htmlContent\": \"<!doctype html>\\n<html lang=\\\"en\\\">\\n<head>\\n  <meta charset=\\\"utf-8\\\" />\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\" />\\n  <meta name=\\\"color-scheme\\\" content=\\\"light dark\\\">\\n  <title>Login Hours Widget</title>\\n\\n  <style>\\n    :root{\\n      --bg:#0b1220;\\n      --panel:#101a2e;\\n      --panel-2:#0e172a;\\n      --border:#1f2b45;\\n      --muted:#94a3b8;\\n      --text:#e5e7eb;\\n      --accent:#3b82f6;\\n      --accent-2:#22c55e;\\n      --danger:#ef4444;\\n      --shadow: 0 10px 30px rgba(0,0,0,.35);\\n      --radius: 14px;\\n      --business-hours: rgba(34,197,94,.15);\\n      --login-valid: rgba(34,197,94,.6);\\n      --login-invalid: rgba(239,68,68,.6);\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      --bg: #f1f3f4;\\n      --panel: #ffffff;\\n      --panel-2: #f8f9fa;\\n      --border: #dadce0;\\n      --muted: #5f6368;\\n      --text: #202124;\\n      --accent: #1a73e8;\\n      --accent-2: #1e8e3e;\\n      --danger: #ea4335;\\n      --shadow: 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);\\n      --business-hours: rgba(30,142,62,.1);\\n      --login-valid: rgba(30,142,62,.4);\\n      --login-invalid: rgba(234,67,53,.4);\\n    }\\n\\n    html,body{\\n      height:100%;\\n      margin:0;\\n      padding:0;\\n    }\\n    body{\\n      background: radial-gradient(900px 500px at 40% -10%, rgba(59,130,246,.18), transparent 60%),\\n                  var(--bg);\\n      color: var(--text);\\n      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, \\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\";\\n      transition: background 0.3s ease, color 0.3s ease;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      padding: clamp(5px, 1.5vw, 15px);\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      background: var(--bg);\\n    }\\n\\n    .widget-container{\\n      max-width: 800px;\\n      width: 100%;\\n      min-width: 300px;\\n      background: var(--panel);\\n      border: 1px solid var(--border);\\n      border-radius: var(--radius);\\n      box-shadow: var(--shadow);\\n      padding: clamp(6px, 1vw, 12px);\\n      height: auto;\\n      overflow: visible;\\n    }\\n\\n    .widget-header{\\n      margin-bottom: clamp(4px, 1vw, 8px);\\n      padding-bottom: clamp(3px, 0.8vw, 6px);\\n      border-bottom: 1px solid var(--border);\\n      display: block;\\n    }\\n\\n    .widget-header h2{\\n      margin: 0 0 clamp(2px, 0.5vw, 4px) 0;\\n      font-size: clamp(0.85rem, 2vw, 1.1rem);\\n      font-weight: 700;\\n      color: var(--text);\\n    }\\n\\n    .widget-header .subtitle{\\n      color: var(--muted);\\n      font-size: clamp(0.65rem, 1.5vw, 0.85rem);\\n    }\\n\\n    .login-info{\\n      display: flex;\\n      align-items: center;\\n      gap: clamp(3px, 0.8vw, 6px);\\n      padding: clamp(2px, 0.5vw, 4px) clamp(4px, 1vw, 8px);\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 4px;\\n      margin-bottom: clamp(3px, 0.8vw, 6px);\\n    }\\n\\n    .login-info .icon{\\n      width: clamp(16px, 3vw, 24px);\\n      height: clamp(16px, 3vw, 24px);\\n      border-radius: 4px;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-size: clamp(0.6rem, 1.5vw, 0.85rem);\\n      flex-shrink: 0;\\n    }\\n\\n    .login-info.valid .icon{\\n      background: linear-gradient(135deg, rgba(34,197,94,.2), rgba(16,185,129,.15));\\n      color: var(--accent-2);\\n      border: 1px solid rgba(34,197,94,.3);\\n    }\\n\\n    .login-info.invalid .icon{\\n      background: linear-gradient(135deg, rgba(239,68,68,.2), rgba(220,38,38,.15));\\n      color: var(--danger);\\n      border: 1px solid rgba(239,68,68,.3);\\n    }\\n\\n    .login-info .details{\\n      flex: 1;\\n    }\\n\\n    .login-info .label{\\n      font-size: 0.65rem;\\n      color: var(--muted);\\n      margin-bottom: 2px;\\n      display: none; /* Hide label to save space */\\n    }\\n\\n    .login-info .timestamp{\\n      font-size: clamp(0.6rem, 1.5vw, 0.8rem);\\n      font-weight: 600;\\n      color: var(--text);\\n      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;\\n    }\\n\\n    .login-info .status{\\n      padding: clamp(2px, 0.5vw, 4px) clamp(4px, 1vw, 8px);\\n      border-radius: 999px;\\n      font-size: clamp(0.55rem, 1.3vw, 0.75rem);\\n      font-weight: 600;\\n    }\\n\\n    .login-info.valid .status{\\n      background: rgba(34,197,94,.15);\\n      color: var(--accent-2);\\n      border: 1px solid rgba(34,197,94,.3);\\n    }\\n\\n    .login-info.invalid .status{\\n      background: rgba(239,68,68,.15);\\n      color: var(--danger);\\n      border: 1px solid rgba(239,68,68,.3);\\n    }\\n\\n    .calendar-container{\\n      overflow: visible;\\n      width: 100%;\\n    }\\n\\n    .calendar-grid{\\n      display: grid;\\n      grid-template-columns: clamp(30px, 8vw, 50px) repeat(24, minmax(0, 1fr));\\n      grid-template-rows: auto repeat(7, 1fr);\\n      gap: clamp(1px, 0.2vw, 2px);\\n      width: 100%;\\n      min-width: 0;\\n      align-items: stretch;\\n      justify-items: stretch;\\n    }\\n    \\n    .calendar-grid > * {\\n      min-width: 0;\\n      box-sizing: border-box;\\n      align-self: stretch;\\n    }\\n\\n    .hour-label{\\n      padding: clamp(1px, 0.3vw, 3px);\\n      text-align: center;\\n      font-size: clamp(0.4rem, 1.2vw, 0.6rem);\\n      color: var(--muted);\\n      font-weight: 600;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      line-height: 1.2;\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 2px;\\n      writing-mode: horizontal-tb;\\n      box-sizing: border-box;\\n      margin: 0;\\n      min-height: clamp(18px, 3.5vh, 22px);\\n    }\\n\\n    .day-header{\\n      padding: clamp(2px, 0.5vw, 4px) clamp(1px, 0.3vw, 3px);\\n      text-align: center;\\n      font-weight: 600;\\n      font-size: clamp(0.5rem, 1.4vw, 0.7rem);\\n      color: var(--text);\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 2px;\\n      writing-mode: horizontal-tb;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      flex-direction: column;\\n      box-sizing: border-box;\\n      margin: 0;\\n      min-height: clamp(18px, 3.5vh, 22px);\\n    }\\n\\n    .day-header .day-name{\\n      display: block;\\n    }\\n\\n    .day-header .day-date{\\n      font-size: clamp(0.4rem, 1vw, 0.55rem);\\n      color: var(--muted);\\n      font-weight: 500;\\n      display: block;\\n      margin-top: clamp(1px, 0.3vw, 2px);\\n    }\\n\\n    .time-cell{\\n      border: 1px solid var(--border);\\n      border-radius: 1px;\\n      position: relative;\\n      transition: all 0.2s ease;\\n      width: 100%;\\n      min-height: clamp(18px, 3.5vh, 22px);\\n      box-sizing: border-box;\\n      margin: 0;\\n      padding: 0;\\n      display: block;\\n    }\\n\\n    .time-cell.daytime{\\n      background: rgba(255,255,255,.02);\\n    }\\n\\n    .time-cell.nighttime{\\n      background: rgba(0,0,0,.05);\\n    }\\n\\n    .time-cell.business-hours{\\n      background: var(--business-hours) !important;\\n      border-color: rgba(34,197,94,.3);\\n    }\\n\\n    body.light-theme .time-cell.daytime{\\n      background: rgba(0,0,0,.01);\\n    }\\n\\n    body.light-theme .time-cell.nighttime{\\n      background: rgba(0,0,0,.03);\\n    }\\n\\n    .time-cell.login-event{\\n      border-width: 2px;\\n      box-shadow: 0 0 0 2px var(--bg);\\n    }\\n\\n    .time-cell.login-event.valid{\\n      background: var(--login-valid);\\n      border-color: var(--accent-2);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 12px rgba(34,197,94,.4);\\n    }\\n\\n    .time-cell.login-event.invalid{\\n      background: var(--danger);\\n      border-color: var(--danger);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 12px rgba(239,68,68,.4);\\n    }\\n\\n    .time-cell.login-event::after{\\n      content: '‚óè';\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, -50%);\\n      font-size: 0.5rem;\\n      line-height: 1;\\n    }\\n\\n    .legend{\\n      display: none; /* Hide legend to save space */\\n      gap: 12px;\\n      margin-top: 8px;\\n      padding-top: 8px;\\n      border-top: 1px solid var(--border);\\n      flex-wrap: wrap;\\n    }\\n\\n    .legend-item{\\n      display: flex;\\n      align-items: center;\\n      gap: 4px;\\n      font-size: 0.65rem;\\n      color: var(--text);\\n    }\\n\\n    .legend-color{\\n      width: 12px;\\n      height: 12px;\\n      border-radius: 2px;\\n      border: 1px solid var(--border);\\n    }\\n\\n    .legend-color.business-hours{\\n      background: var(--business-hours);\\n      border-color: rgba(34,197,94,.2);\\n    }\\n\\n    .legend-color.valid{\\n      background: var(--login-valid);\\n      border-color: var(--accent-2);\\n    }\\n\\n    .legend-color.invalid{\\n      background: var(--login-invalid);\\n      border-color: var(--danger);\\n    }\\n\\n    @media (max-width: 768px){\\n      .widget-container{\\n        max-width: 100%;\\n        padding: clamp(4px, 1.5vw, 8px);\\n      }\\n      .calendar-grid{\\n        grid-template-columns: clamp(25px, 6vw, 40px) repeat(24, minmax(0, 1fr));\\n        min-width: 0;\\n      }\\n    }\\n\\n    @media (max-width: 480px){\\n      .widget-container{\\n        max-height: min(320px, 50vh);\\n      }\\n      .calendar-container{\\n        max-height: min(280px, 45vh);\\n      }\\n      .calendar-grid{\\n        grid-template-rows: clamp(14px, 2.5vh, 18px) repeat(7, minmax(clamp(18px, 2.5vh, 22px), 1fr));\\n      }\\n    }\\n  </style>\\n</head>\\n\\n<body>\\n  <div class=\\\"widget-container\\\">\\n    <div class=\\\"widget-header\\\">\\n      <h2>Outside of Business Hours</h2>\\n      <div class=\\\"subtitle\\\">Weekly view showing business hours and login events</div>\\n    </div>\\n\\n    <div id=\\\"loginInfo\\\" class=\\\"login-info\\\">\\n      <div class=\\\"icon\\\">üîê</div>\\n      <div class=\\\"details\\\">\\n        <div class=\\\"label\\\">Login Timestamp</div>\\n        <div class=\\\"timestamp\\\" id=\\\"loginTimestamp\\\">Loading...</div>\\n      </div>\\n      <div class=\\\"status\\\" id=\\\"loginStatus\\\">Checking...</div>\\n    </div>\\n\\n    <div class=\\\"calendar-container\\\">\\n      <div class=\\\"calendar-grid\\\" id=\\\"calendarGrid\\\">\\n        <!-- Grid will be generated by JavaScript -->\\n      </div>\\n    </div>\\n\\n    <div class=\\\"legend\\\">\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color business-hours\\\"></div>\\n        <span>Business Hours (9 AM - 5 PM)</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color valid\\\"></div>\\n        <span>Valid Login (Within Business Hours)</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color invalid\\\"></div>\\n        <span>Invalid Login (Outside Business Hours)</span>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <script>\\n    // Business hours configuration (9 AM - 5 PM)\\n    const BUSINESS_HOURS_START = 9;\\n    const BUSINESS_HOURS_END = 17; // 5 PM\\n\\n    // Get timestamp from URL parameter or use default (outside business hours)\\n    function getTimestampFromURL() {\\n      const urlParams = new URLSearchParams(window.location.search);\\n      const timestamp = urlParams.get('timestamp');\\n      if (timestamp) {\\n        return new Date(timestamp);\\n      }\\n      // Default: Saturday at 11 PM (outside business hours)\\n      const defaultDate = new Date();\\n      const currentDay = defaultDate.getDay();\\n      const daysUntilSaturday = currentDay === 6 ? 0 : (6 - currentDay + 7) % 7; // Today if Saturday, else next Saturday\\n      defaultDate.setDate(defaultDate.getDate() + daysUntilSaturday);\\n      defaultDate.setHours(23, 0, 0, 0); // 11 PM\\n      return defaultDate;\\n    }\\n\\n    const loginTimestamp = getTimestampFromURL();\\n    const loginDay = loginTimestamp.getDay(); // 0 = Sunday, 6 = Saturday\\n    const loginHour = loginTimestamp.getHours();\\n    const loginMinute = loginTimestamp.getMinutes();\\n\\n    // Check if login is within business hours\\n    const isWithinBusinessHours = loginDay >= 1 && loginDay <= 5 && // Monday to Friday\\n                                   loginHour >= BUSINESS_HOURS_START && \\n                                   loginHour < BUSINESS_HOURS_END;\\n\\n    // Format timestamp for display - compact format\\n    function formatTimestamp(date) {\\n      const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\\n      const dayName = days[date.getDay()];\\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\\n      const day = date.getDate().toString().padStart(2, '0');\\n      const hours = date.getHours().toString().padStart(2, '0');\\n      const minutes = date.getMinutes().toString().padStart(2, '0');\\n      return `${dayName} ${month}/${day} ${hours}:${minutes}`;\\n    }\\n\\n    // Update login info display\\n    const loginInfo = document.getElementById('loginInfo');\\n    const loginTimestampEl = document.getElementById('loginTimestamp');\\n    const loginStatusEl = document.getElementById('loginStatus');\\n\\n    loginTimestampEl.textContent = formatTimestamp(loginTimestamp);\\n    \\n    if (isWithinBusinessHours) {\\n      loginInfo.classList.add('valid');\\n      loginInfo.classList.remove('invalid');\\n      loginStatusEl.textContent = 'Valid';\\n    } else {\\n      loginInfo.classList.add('invalid');\\n      loginInfo.classList.remove('valid');\\n      loginStatusEl.textContent = 'Outside of business hours';\\n    }\\n\\n    // Generate calendar grid - 7 days x 24 hours\\n    function generateCalendar() {\\n      const grid = document.getElementById('calendarGrid');\\n      const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\\n      \\n      // Get the start of the week (Sunday) based on the login date\\n      const weekStart = new Date(loginTimestamp);\\n      weekStart.setDate(loginTimestamp.getDate() - loginTimestamp.getDay());\\n      weekStart.setHours(0, 0, 0, 0); // Normalize to midnight\\n      \\n      // Header row: empty cell + 24 hour labels\\n      const emptyHeader = document.createElement('div');\\n      emptyHeader.className = 'day-header';\\n      grid.appendChild(emptyHeader);\\n      \\n      for (let hour = 0; hour < 24; hour++) {\\n        const hourLabel = document.createElement('div');\\n        hourLabel.className = 'hour-label';\\n        const displayHour = hour === 0 ? '12A' : hour < 12 ? `${hour}A` : hour === 12 ? '12P' : `${hour - 12}P`;\\n        \\n        // Add emoji for day/night indication\\n        let emoji = '';\\n        if (hour === 6) {\\n          emoji = 'üåÖ '; // Sunrise\\n        } else if (hour === 18) {\\n          emoji = 'üåÜ '; // Sunset\\n        } else if (hour >= 6 && hour < 18) {\\n          emoji = '‚òÄÔ∏è '; // Daytime\\n        } else {\\n          emoji = 'üåô '; // Nighttime\\n        }\\n        \\n        hourLabel.textContent = emoji + displayHour;\\n        grid.appendChild(hourLabel);\\n      }\\n\\n      // Generate 7 day rows, each with day header + 24 hour cells\\n      for (let dayOffset = 0; dayOffset < 7; dayOffset++) {\\n        const currentDay = new Date(weekStart);\\n        currentDay.setDate(weekStart.getDate() + dayOffset);\\n        currentDay.setHours(0, 0, 0, 0); // Normalize to midnight for date comparison\\n        const dayOfWeek = currentDay.getDay();\\n        \\n        // Day header\\n        const dayHeader = document.createElement('div');\\n        dayHeader.className = 'day-header';\\n        dayHeader.innerHTML = `\\n          <span class=\\\"day-name\\\">${days[dayOfWeek]}</span>\\n          <span class=\\\"day-date\\\">${currentDay.getMonth() + 1}/${currentDay.getDate()}</span>\\n        `;\\n        grid.appendChild(dayHeader);\\n\\n        // 24 hour cells for this day\\n        for (let hour = 0; hour < 24; hour++) {\\n          const cell = document.createElement('div');\\n          cell.className = 'time-cell';\\n          \\n          // Add daytime/nighttime class (daytime: 6 AM - 6 PM)\\n          if (hour >= 6 && hour < 18) {\\n            cell.classList.add('daytime');\\n          } else {\\n            cell.classList.add('nighttime');\\n          }\\n          \\n          // Check if this is business hours (Monday-Friday, 9 AM - 5 PM)\\n          const isBusinessHour = dayOfWeek >= 1 && dayOfWeek <= 5 && \\n                                 hour >= BUSINESS_HOURS_START && hour < BUSINESS_HOURS_END;\\n          \\n          if (isBusinessHour) {\\n            cell.classList.add('business-hours');\\n          }\\n\\n          // Check if this is the login event - compare date components directly\\n          const isLoginEvent = currentDay.getFullYear() === loginTimestamp.getFullYear() &&\\n                              currentDay.getMonth() === loginTimestamp.getMonth() &&\\n                              currentDay.getDate() === loginTimestamp.getDate() &&\\n                              hour === loginHour;\\n          \\n          if (isLoginEvent) {\\n            cell.classList.add('login-event');\\n            if (isWithinBusinessHours) {\\n              cell.classList.add('valid');\\n            } else {\\n              cell.classList.add('invalid');\\n            }\\n          }\\n\\n          grid.appendChild(cell);\\n        }\\n      }\\n    }\\n\\n    generateCalendar();\\n  </script>\\n</body>\\n</html>\\n\\n\",\n  \"htmlHeight\": 400,\n  \"safeRendering\": false,\n  \"type\": 3,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":1,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"HTML","Description":"","Identifier":"b1011ebe-bf77-4f87-a48e-74691e602bdd","Order":2,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":3,"DataDefinitionJson":"{\n  \"htmlContent\": \"<!doctype html>\\n<html lang=\\\"en\\\">\\n<head>\\n  <meta charset=\\\"utf-8\\\" />\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\" />\\n  <meta name=\\\"color-scheme\\\" content=\\\"light dark\\\">\\n  <title>Globe Travel Widget</title>\\n  <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\\n  <script src=\\\"https://cdn.jsdelivr.net/npm/topojson@3\\\"></script>\\n\\n  <style>\\n    :root{\\n      --bg:#0b1220;\\n      --panel:#101a2e;\\n      --panel-2:#0e172a;\\n      --border:#1f2b45;\\n      --muted:#94a3b8;\\n      --text:#e5e7eb;\\n      --accent:#3b82f6;\\n      --accent-2:#22c55e;\\n      --danger:#ef4444;\\n      --shadow: 0 10px 30px rgba(0,0,0,.35);\\n      --radius: 14px;\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      --bg: #f1f3f4;\\n      --panel: #ffffff;\\n      --panel-2: #f8f9fa;\\n      --border: #dadce0;\\n      --muted: #5f6368;\\n      --text: #202124;\\n      --accent: #1a73e8;\\n      --accent-2: #1e8e3e;\\n      --danger: #ea4335;\\n      --shadow: 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);\\n    }\\n\\n    html,body{\\n      height:100%;\\n      margin:0;\\n      padding:0;\\n    }\\n    body{\\n      background: radial-gradient(900px 500px at 40% -10%, rgba(59,130,246,.18), transparent 60%),\\n                  var(--bg);\\n      color: var(--text);\\n      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, \\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\";\\n      transition: background 0.3s ease, color 0.3s ease;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      padding: 10px;\\n    }\\n\\n    body.light-theme,\\n    html[data-theme='light'] body {\\n      background: var(--bg);\\n    }\\n\\n    .widget-container{\\n      max-width: 800px;\\n      width: 100%;\\n      background: var(--panel);\\n      border: 1px solid var(--border);\\n      border-radius: var(--radius);\\n      box-shadow: var(--shadow);\\n      padding: 8px;\\n      max-height: 280px;\\n      overflow: visible;\\n    }\\n\\n    .widget-header{\\n      margin-bottom: 6px;\\n      padding-bottom: 4px;\\n      border-bottom: 1px solid var(--border);\\n    }\\n\\n    .widget-header h2{\\n      margin: 0 0 4px 0;\\n      font-size: 1rem;\\n      font-weight: 700;\\n      color: var(--text);\\n    }\\n\\n    .widget-header .subtitle{\\n      color: var(--muted);\\n      font-size: 0.75rem;\\n    }\\n\\n    .cities-info{\\n      display: flex;\\n      align-items: center;\\n      justify-content: space-between;\\n      gap: 12px;\\n      padding: 4px 8px;\\n      background: var(--panel-2);\\n      border: 1px solid var(--border);\\n      border-radius: 6px;\\n      margin-bottom: 6px;\\n      font-size: 0.7rem;\\n    }\\n\\n    .city{\\n      display: flex;\\n      align-items: center;\\n      gap: 6px;\\n    }\\n\\n    .city-dot{\\n      width: 8px;\\n      height: 8px;\\n      border-radius: 50%;\\n      flex-shrink: 0;\\n    }\\n\\n    .city-dot.origin{\\n      background: var(--accent);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 8px rgba(59,130,246,.5);\\n    }\\n\\n    .city-dot.destination{\\n      background: var(--accent-2);\\n      box-shadow: 0 0 0 2px var(--bg), 0 0 8px rgba(34,197,94,.5);\\n    }\\n\\n    .city-name{\\n      font-weight: 600;\\n      color: var(--text);\\n    }\\n\\n    .distance-info{\\n      color: var(--muted);\\n      font-size: 0.65rem;\\n    }\\n\\n    .globe-container{\\n      width: 100%;\\n      height: 200px;\\n      position: relative;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      overflow: visible;\\n    }\\n\\n    .globe-svg{\\n      width: 100%;\\n      height: 100%;\\n      max-width: 100%;\\n      max-height: 200px;\\n    }\\n\\n    .globe-circle{\\n      fill: rgba(59,130,246,.15);\\n      stroke: rgba(59,130,246,.4);\\n      stroke-width: 2;\\n    }\\n\\n    .globe-circle-shadow{\\n      fill: rgba(59,130,246,.05);\\n      stroke: none;\\n    }\\n\\n    .globe-grid{\\n      fill: none;\\n      stroke: rgba(148,163,184,.25);\\n      stroke-width: 0.5;\\n    }\\n\\n    .globe-continent{\\n      fill: rgba(34,197,94,.1);\\n      stroke: rgba(34,197,94,.2);\\n      stroke-width: 0.5;\\n    }\\n\\n    .travel-line{\\n      fill: none;\\n      stroke: var(--accent);\\n      stroke-width: 2;\\n      opacity: 0.8;\\n      filter: drop-shadow(0 0 4px rgba(59,130,246,.6));\\n    }\\n\\n    .city-marker{\\n      fill: var(--accent);\\n      filter: drop-shadow(0 0 4px rgba(59,130,246,.8));\\n    }\\n\\n    .city-marker.destination{\\n      fill: var(--accent-2);\\n      filter: drop-shadow(0 0 4px rgba(34,197,94,.8));\\n    }\\n\\n    .city-label{\\n      font-size: 0.6rem;\\n      fill: var(--text);\\n      font-weight: 600;\\n      text-anchor: middle;\\n      dominant-baseline: middle;\\n    }\\n\\n    body.light-theme .globe-circle{\\n      fill: rgba(26,115,232,.08);\\n      stroke: rgba(26,115,232,.2);\\n    }\\n\\n    body.light-theme .globe-grid{\\n      stroke: rgba(95,99,104,.15);\\n    }\\n  </style>\\n</head>\\n\\n<body>\\n  <div class=\\\"widget-container\\\">\\n    <div class=\\\"widget-header\\\">\\n      <h2>Travel Distance</h2>\\n      <div class=\\\"subtitle\\\">Great circle route between cities</div>\\n    </div>\\n\\n    <div class=\\\"cities-info\\\" id=\\\"citiesInfo\\\">\\n      <div class=\\\"city\\\">\\n        <div class=\\\"city-dot origin\\\"></div>\\n        <span class=\\\"city-name\\\" id=\\\"originCity\\\">Kansas City</span>\\n      </div>\\n      <div class=\\\"distance-info\\\" id=\\\"distanceInfo\\\">Calculating...</div>\\n      <div class=\\\"city\\\">\\n        <div class=\\\"city-dot destination\\\"></div>\\n        <span class=\\\"city-name\\\" id=\\\"destinationCity\\\">Philadelphia</span>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"globe-container\\\">\\n      <svg class=\\\"globe-svg\\\" id=\\\"globeSvg\\\" viewBox=\\\"0 0 400 200\\\" preserveAspectRatio=\\\"xMidYMid meet\\\">\\n        <!-- Globe will be drawn dynamically -->\\n      </svg>\\n    </div>\\n  </div>\\n\\n  <script>\\n    // City coordinates (latitude, longitude)\\n    const cityCoordinates = {\\n      'Kansas City': { lat: 39.0997, lon: -94.5786 },\\n      'Philadelphia': { lat: 39.9526, lon: -75.1652 },\\n      'New York': { lat: 40.7128, lon: -74.0060 },\\n      'Los Angeles': { lat: 34.0522, lon: -118.2437 },\\n      'Chicago': { lat: 41.8781, lon: -87.6298 },\\n      'Houston': { lat: 29.7604, lon: -95.3698 },\\n      'Phoenix': { lat: 33.4484, lon: -112.0740 },\\n      'San Antonio': { lat: 29.4241, lon: -98.4936 },\\n      'San Diego': { lat: 32.7157, lon: -117.1611 },\\n      'Dallas': { lat: 32.7767, lon: -96.7970 }\\n    };\\n\\n    // Get cities from URL parameters or use defaults\\n    function getCitiesFromURL() {\\n      const urlParams = new URLSearchParams(window.location.search);\\n      const origin = urlParams.get('origin') || 'Kansas City';\\n      const destination = urlParams.get('destination') || 'Philadelphia';\\n      return { origin, destination };\\n    }\\n\\n    const { origin, destination } = getCitiesFromURL();\\n\\n    // Update city names in UI\\n    document.getElementById('originCity').textContent = origin;\\n    document.getElementById('destinationCity').textContent = destination;\\n\\n\\n    // Calculate great circle distance (Haversine formula)\\n    function calculateDistance(lat1, lon1, lat2, lon2) {\\n      const R = 6371; // Earth radius in km\\n      const dLat = (lat2 - lat1) * Math.PI / 180;\\n      const dLon = (lon2 - lon1) * Math.PI / 180;\\n      const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\\n                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\\n                Math.sin(dLon/2) * Math.sin(dLon/2);\\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\\n      return R * c;\\n    }\\n\\n    // Generate great circle path points\\n    function generateGreatCirclePath(lat1, lon1, lat2, lon2, numPoints = 50) {\\n      const points = [];\\n      for (let i = 0; i <= numPoints; i++) {\\n        const t = i / numPoints;\\n        const lat = lat1 + (lat2 - lat1) * t;\\n        const lon = lon1 + (lon2 - lon1) * t;\\n        points.push({ lat, lon });\\n      }\\n      return points;\\n    }\\n\\n    // Draw the world map with travel path using D3.js\\n    function drawGlobe() {\\n      const originCoords = cityCoordinates[origin];\\n      const destCoords = cityCoordinates[destination];\\n\\n      if (!originCoords || !destCoords) {\\n        console.error('City coordinates not found');\\n        return;\\n      }\\n\\n      // Calculate distance\\n      const distance = calculateDistance(\\n        originCoords.lat, originCoords.lon,\\n        destCoords.lat, destCoords.lon\\n      );\\n      const distanceMiles = (distance * 0.621371).toFixed(0);\\n      document.getElementById('distanceInfo').textContent = `${distanceMiles} mi (${distance.toFixed(0)} km)`;\\n\\n      const svg = d3.select('#globeSvg');\\n      svg.selectAll('*').remove();\\n\\n      const width = 400;\\n      const height = 200;\\n\\n      // Calculate center and scale to fit both cities\\n      const centerLon = (originCoords.lon + destCoords.lon) / 2;\\n      const centerLat = (originCoords.lat + destCoords.lat) / 2;\\n      const lonRange = Math.abs(destCoords.lon - originCoords.lon);\\n      const latRange = Math.abs(destCoords.lat - originCoords.lat);\\n      const maxRange = Math.max(lonRange, latRange);\\n      \\n      // Scale to fit the cities with padding - increased zoom\\n      const scale = maxRange > 20 ? 400 : maxRange > 10 ? 600 : maxRange > 5 ? 1000 : 1500;\\n\\n      // Create projection - use geoMercator for world map\\n      const projection = d3.geoMercator()\\n        .scale(scale)\\n        .translate([width / 2, height / 2])\\n        .center([centerLon, centerLat]);\\n\\n      const path = d3.geoPath().projection(projection);\\n\\n      // Load world map data\\n      d3.json('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json')\\n        .then(world => {\\n          // Draw countries\\n          svg.append('g')\\n            .selectAll('path')\\n            .data(topojson.feature(world, world.objects.countries).features)\\n            .enter()\\n            .append('path')\\n            .attr('d', path)\\n            .attr('class', 'globe-continent')\\n            .attr('fill', 'rgba(34,197,94,.08)')\\n            .attr('stroke', 'rgba(148,163,184,.2)')\\n            .attr('stroke-width', 0.5);\\n\\n          // Draw travel path (great circle)\\n          const pathPoints = generateGreatCirclePath(\\n            originCoords.lat, originCoords.lon,\\n            destCoords.lat, destCoords.lon,\\n            100\\n          );\\n\\n          const lineData = pathPoints.map(p => [p.lon, p.lat]);\\n          const lineGenerator = d3.line()\\n            .x(d => projection(d)[0])\\n            .y(d => projection(d)[1])\\n            .curve(d3.curveLinear);\\n\\n          svg.append('path')\\n            .datum(lineData)\\n            .attr('class', 'travel-line')\\n            .attr('d', lineGenerator)\\n            .attr('fill', 'none')\\n            .attr('stroke', 'var(--accent)')\\n            .attr('stroke-width', 2)\\n            .attr('opacity', 0.8);\\n\\n          // Draw city markers\\n          const originProj = projection([originCoords.lon, originCoords.lat]);\\n          const destProj = projection([destCoords.lon, destCoords.lat]);\\n\\n          // Origin marker\\n          svg.append('circle')\\n            .attr('class', 'city-marker')\\n            .attr('cx', originProj[0])\\n            .attr('cy', originProj[1])\\n            .attr('r', 6)\\n            .attr('fill', 'var(--accent)');\\n\\n          svg.append('text')\\n            .attr('class', 'city-label')\\n            .attr('x', originProj[0])\\n            .attr('y', originProj[1] - 12)\\n            .attr('text-anchor', 'middle')\\n            .text(origin);\\n\\n          // Destination marker\\n          svg.append('circle')\\n            .attr('class', 'city-marker destination')\\n            .attr('cx', destProj[0])\\n            .attr('cy', destProj[1])\\n            .attr('r', 6)\\n            .attr('fill', 'var(--accent-2)');\\n\\n          svg.append('text')\\n            .attr('class', 'city-label')\\n            .attr('x', destProj[0])\\n            .attr('y', destProj[1] - 12)\\n            .attr('text-anchor', 'middle')\\n            .text(destination);\\n        })\\n        .catch(error => {\\n          console.error('Error loading world map:', error);\\n          // Fallback: draw simple map outline\\n          svg.append('ellipse')\\n            .attr('class', 'globe-circle')\\n            .attr('cx', width / 2)\\n            .attr('cy', height / 2)\\n            .attr('rx', width * 0.45)\\n            .attr('ry', height * 0.45);\\n        });\\n    }\\n\\n    // Initialize\\n    drawGlobe();\\n  </script>\\n</body>\\n</html>\\n\\n\",\n  \"htmlHeight\": 400,\n  \"safeRendering\": false,\n  \"type\": 3,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":1,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"HTML","Description":"","Identifier":"fbd27bf5-43a7-4b91-80f6-4f0e27b5bcd0","Order":3,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":3,"DataDefinitionJson":"{\n  \"htmlContent\": \"<!DOCTYPE html>\\n<html>\\n\\n<head>\\n<style>\\n\\tbody {\\n\\t\\tbackground-color: #EDEFF6;\\n\\t\\tcolor: #4E4F63;\\n\\t\\tfont-family: Source Sans;\\n\\t}\\n</style>\\n</head>\\n\\n<body>\\n//enter your code here\\n</body>\\n<script>\\n\\t//This script enables the widget theme to reflect the user's choice in the platform.\\n\\t//Removing this script will result in your HTML widget permanently displayed in the light theme.\\n\\tonmessage = evt => {\\n\\t\\tfor (const [key, value] of Object.entries(evt.data)) {\\n\\t\\t\\tdocument.body.style[key] = value;\\n\\t\\t\\tdebugger;\\n\\t\\t}\\n\\t}\\n</script>\\n</html>\",\n  \"htmlHeight\": 200,\n  \"safeRendering\": false,\n  \"type\": 3,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Entities Highlights","Description":"This widget displays the highlighted fields for each entity.","Identifier":"f2213a43-3fdc-4904-82f0-511539bc5609","Order":4,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":10,"DataDefinitionJson":"{\n  \"highlightFieldConfigs\": [],\n  \"targetScope\": 0,\n  \"type\": 10,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Entities Graph","Description":"This widget includes a visual graph and other details of the Case Entities.","Identifier":"dab0db51-2965-4afe-bb4a-bfb201f75770","Order":5,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":7,"DataDefinitionJson":"{\n  \"targetScope\": 0,\n  \"type\": 7,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Insights","Description":"This widget contains all the Insights from the Playbook Insights actions, general Insights and any other Insights you have added. They will be presented in HTML format","Identifier":"0ddd6724-8495-4899-be57-c92380ca0c08","Order":6,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":15,"DataDefinitionJson":"{\n  \"insights\": null,\n  \"type\": 15,\n  \"widgetDefinitionScope\": 2\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""},{"Title":"Pending Actions","Description":"This Widget lists all playbook actions waiting for user input.","Identifier":"7eaa87b0-8ff3-4a31-89d2-5c24db050e55","Order":7,"TemplateIdentifier":"56480d39-f44f-457b-bd6d-c2676e75eddc","Type":11,"DataDefinitionJson":"{\n  \"pendingSteps\": null,\n  \"type\": 11,\n  \"widgetDefinitionScope\": 0\n}","GridColumns":2,"ActionWidgetTemplateIdentifier":null,"StepIdentifier":null,"StepIntegration":null,"BlockStepIdentifier":null,"BlockStepInstanceName":null,"PresentIfEmpty":false,"ConditionsGroup":{"Conditions":[],"LogicalOperator":0},"IntegrationName":""}]}],"Permissions":[],"Environments":["lab-test-2"]}}